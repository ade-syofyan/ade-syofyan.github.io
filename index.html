<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ade Syofyan - Portofolio Developer Profesional</title>
    <!-- Meta SEO Tags -->
    <meta
      name="description"
      content="Portofolio resmi Ade Syofyan, seorang Mobile & Web Developer senior dengan keahlian di Flutter, Kotlin, Laravel, Firebase, ERP, dan integrasi AI. Ahli dalam membangun solusi digital inovatif dan memecahkan masalah."
    />
    <meta
      name="keywords"
      content="Ade Syofyan, Mobile Developer, Web Developer, Flutter, Kotlin, Laravel, Firebase, ERP, AI Integration, Programmer Senior, Problem Solving, Portofolio Developer, Pengembangan Aplikasi, Padang, Indonesia"
    />
    <meta name="author" content="Ade Syofyan" />
    <link rel="canonical" href="https://ade-syofyan.github.io/" />

    <!-- Open Graph / Facebook / LinkedIn (untuk Rich Snippets di media sosial) -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://ade-syofyan.github.io/" />
    <meta
      property="og:title"
      content="Ade Syofyan - Portofolio Mobile & Web Developer Senior"
    />
    <meta
      property="og:description"
      content="Portofolio resmi Ade Syofyan, seorang Mobile & Web Developer senior dengan keahlian di Flutter, Kotlin, Laravel, Firebase, ERP, dan integrasi AI. Ahli dalam membangun solusi digital inovatif dan memecahkan masalah."
    />
    <meta
      property="og:image"
      content="https://placehold.co/1200x630/4a5568/e2e8f0?text=Ade+Syofyan+Portfolio"
    />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:locale" content="id_ID" />

    <!-- Twitter Card (untuk Rich Snippets di Twitter) -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content="https://ade-syofyan.github.io/" />
    <meta
      property="twitter:title"
      content="Ade Syofyan - Portofolio Mobile & Web Developer Senior"
    />
    <meta
      property="twitter:description"
      content="Portofolio resmi Ade Syofyan, seorang Mobile & Web Developer senior dengan keahlian di Flutter, Kotlin, Laravel, Firebase, ERP, dan integrasi AI. Ahli dalam membangun solusi digital inovasi dan memecahkan masalah."
    />
    <meta
      property="twitter:image"
      content="https://placehold.co/1200x675/4a5568/e2e8f0?text=Ade+Syofyan+Portfolio"
    />
    <meta property="twitter:image:width" content="1200" />
    <meta property="twitter:image:height" content="675" />
    <meta name="twitter:creator" content="@yourtwitterhandle" />
    <!-- Ganti dengan handle Twitter Anda jika ada -->

    <!-- Meta Tag Tambahan untuk Kontrol Crawler dan Caching -->
    <meta name="robots" content="index, follow" />
    <!-- Menginstruksikan crawler untuk mengindeks dan mengikuti tautan -->
    <meta name="googlebot" content="index, follow" />
    <!-- Spesifik untuk Google bot -->
    <meta name="revisit-after" content="7 days" />
    <!-- Menginstruksikan bot untuk mengunjungi kembali setelah 7 hari -->
    <meta name="distribution" content="global" />
    <meta name="rating" content="general" />

    <link
      rel="icon"
      href="https://placehold.co/32x32/63b3ed/ffffff?text=AS"
      type="image/x-icon"
    />
    <!-- Favicon sederhana -->

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Inter Font -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <!-- Lucide Icons CDN for professional icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
      body {
        font-family: "Inter", sans-serif;
        background-color: #1a202c; /* Latar belakang gelap */
        color: #e2e8f0; /* Teks abu-abu terang */
        scroll-behavior: smooth;
        overflow-x: hidden; /* Prevent horizontal scrollbar */
      }
      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 1rem;
      }
      .text-accent {
        color: #63b3ed; /* Warna aksen biru teknologi */
      }
      .bg-card {
        background-color: #2d3748; /* Warna gelap sedikit lebih terang untuk kartu */
        border-radius: 0.75rem; /* Sudut membulat */
      }
      .btn-primary {
        background-color: #63b3ed;
        color: #ffffff;
        padding: 0.75rem 1.5rem;
        border-radius: 0.5rem;
        transition: background-color 0.3s ease, transform 0.3s ease;
      }
      .btn-primary:hover {
        background-color: #4299e1;
        transform: translateY(-2px); /* Sedikit naik saat hover */
      }
      .btn-secondary {
        border: 1px solid #63b3ed;
        color: #63b3ed;
        padding: 0.75rem 1.5rem;
        border-radius: 0.5rem;
        transition: background-color 0.3s ease, color 0.3s ease,
          transform 0.3s ease;
      }
      .btn-secondary:hover {
        background-color: #63b3ed;
        color: #ffffff;
        transform: translateY(-2px); /* Sedikit naik saat hover */
      }
      /* Scrollbar kustom untuk browser webkit */
      ::-webkit-scrollbar {
        width: 8px;
      }
      ::-webkit-scrollbar-track {
        background: #2d3748;
      }
      ::-webkit-scrollbar-thumb {
        background: #63b3ed;
        border-radius: 4px;
      }
      ::-webkit-scrollbar-thumb:hover {
        background: #4299e1;
      }

      /* Overlay untuk modal detail proyek */
      .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 1000;
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.3s ease, visibility 0.3s ease;
      }
      .modal-overlay.open {
        opacity: 1;
        visibility: visible;
      }
      .modal-content {
        background-color: #2d3748;
        padding: 2rem;
        border-radius: 1rem;
        max-width: 90%; /* Lebar maksimal */
        width: 700px; /* Lebar spesifik untuk desktop */
        max-height: 90%;
        overflow-y: auto;
        position: relative;
        transform: translateY(20px); /* Efek jatuh sedikit awal untuk animasi */
        transition: transform 0.3s ease;
      }
      .modal-overlay.open .modal-content {
        transform: translateY(0);
      }
      .modal-close-btn {
        position: absolute;
        top: 1rem;
        right: 1rem;
        background: none;
        border: none;
        font-size: 1.5rem;
        color: #e2e8f0;
        cursor: pointer;
        transition: color 0.3s ease;
      }
      .modal-close-btn:hover {
        color: #63b3ed;
      }

      /* Gaya kanvas untuk efek latar belakang hero */
      #heroCanvas {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 0; /* Pastikan di belakang konten hero */
        background-color: transparent; /* Pastikan tidak menutupi warna latar belakang header */
        opacity: 0.2; /* Sedikit transparan agar tidak terlalu mendominasi */
      }

      /* Gaya spesifik Chatbot */
      .chatbot-content {
        background-color: #2d3748; /* Warna latar belakang konten chatbot */
        padding: 1.5rem; /* Padding di dalam konten chatbot */
        border-radius: 1rem; /* Sudut membulat untuk konten chatbot */
        max-width: 90%; /* Lebar maksimal 90% dari viewport */
        width: 100%; /* Gunakan lebar penuh dari parent (modal-overlay yang sudah di tengah) */
        max-height: 80%; /* Tinggi maksimal 80% dari viewport */
        overflow: hidden; /* Sembunyikan overflow, chat-display akan menangani scroll internal */
        display: flex; /* Gunakan flexbox untuk layout internal */
        flex-direction: column; /* Susun elemen anak secara vertikal */
        position: relative; /* Untuk positioning tombol close */
      }
      .chat-display {
        flex-grow: 1; /* Biarkan area display chat mengambil sisa ruang vertikal */
        background-color: #1a202c; /* Warna latar belakang area display chat */
        border-radius: 0.5rem; /* Sudut membulat untuk display chat */
        padding: 1rem; /* Padding di dalam display chat */
        overflow-y: auto; /* Aktifkan scroll vertikal jika konten melebihi area */
        margin-bottom: 1rem; /* Jarak bawah sebelum area input */
        display: flex; /* Gunakan flexbox untuk pesan */
        flex-direction: column; /* Susun pesan secara vertikal */
      }
      /* Gaya untuk pesan chat agar teks membungkus */
      .chat-message {
        word-wrap: break-word; /* Bungkus kata yang panjang */
        overflow-wrap: break-word; /* Alternatif untuk word-wrap */
      }
      .chat-input-area {
        display: flex; /* Gunakan flexbox untuk input dan tombol */
        flex-direction: column; /* Default: susun vertikal untuk layar kecil */
        gap: 0.5rem; /* Jarak antara input dan tombol saat vertikal */
      }
      .chat-input-area input {
        background-color: #4a5568;
        border: 1px solid #63b3ed;
        border-radius: 0.5rem;
        padding: 0.75rem 1rem;
        color: #e2e8f0;
        width: 100%; /* Lebar penuh saat dalam mode kolom */
        box-sizing: border-box; /* Padding dan border termasuk dalam width */
      }
      .chat-input-area button {
        background-color: #63b3ed;
        color: #ffffff;
        padding: 0.75rem 1rem;
        border-radius: 0.5rem;
        transition: background-color 0.3s ease;
        width: 100%; /* Lebar penuh saat dalam mode kolom */
        box-sizing: border-box; /* Padding dan border termasuk dalam width */
        white-space: nowrap; /* Cegah teks tombol terpotong ke baris baru */
      }
      .chat-input-area button:hover {
        background-color: #4299e1;
      }

      /* Mobile Navigation - Awal perbaikan */
      /* Sembunyikan desktop nav dan tampilkan mobile toggle secara default untuk mobile-first */
      
      /* Media query untuk chat input area pada layar yang lebih lebar */
      @media (min-width: 380px) { /* Anda bisa menyesuaikan breakpoint ini */
        .chat-input-area {
          flex-direction: row; /* Kembali ke layout horizontal */
        }
        .chat-input-area input {
          flex-grow: 1;    /* Biarkan input mengambil sisa ruang */
          width: auto;     /* Reset lebar dari mode kolom */
        }
        .chat-input-area button {
          width: auto;     /* Lebar tombol berdasarkan konten & padding */
          flex-shrink: 0;  /* Cegah tombol menyusut */
        }
      }
      /* .desktop-nav { */
        /* display: none; /* Now handled by Tailwind 'hidden md:flex' */
      /* } */
      /* .mobile-nav-toggle { */
        /* display: block; /* Now handled by Tailwind 'md:hidden' (button is inline-block by default) */
      /* } */

      .mobile-menu-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.95); /* Lebih gelap untuk fokus */
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        z-index: 1010; /* Lebih tinggi dari modal lain */
        opacity: 0;
        visibility: hidden;
        transform: translateX(100%); /* Geser keluar dari layar */
        transition: opacity 0.3s ease, visibility 0.3s ease, transform 0.3s ease;
      }
      .mobile-menu-overlay.open {
        opacity: 1;
        visibility: visible;
        transform: translateX(0); /* Geser masuk */
      }
      .mobile-menu-overlay a {
        color: #e2e8f0;
        font-size: 0.8rem;
        padding: 1rem 0;
        width: 80%;
        text-align: center;
        transition: color 0.3s ease;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1); /* Garis pemisah */
      }
      .mobile-menu-overlay a:last-child {
        border-bottom: none; /* Hapus garis bawah terakhir */
      }
      .mobile-menu-overlay a:hover {
        color: #63b3ed;
      }
      .mobile-menu-close-btn {
        position: absolute;
        top: 1rem;
        right: 1rem;
        background: none;
        border: none;
        font-size: 2.5rem; /* Ukuran lebih besar */
        color: #e2e8f0;
        cursor: pointer;
        z-index: 1011;
        transition: color 0.3s ease;
      }
      .mobile-menu-close-btn:hover {
        color: #63b3ed;
      }

      /* Responsif untuk Tablet dan Desktop */
      @media (min-width: 768px) {
        /* .desktop-nav { */
          /* display: flex; /* Tampilkan desktop nav */ /* Now handled by Tailwind 'hidden md:flex' */
        /* } */
        /* .mobile-nav-toggle, */
        /* .mobile-menu-overlay { */
          /* display: none; /* Sembunyikan mobile toggle dan overlay */ /* Now handled by Tailwind 'md:hidden' for these elements */
        /* } */
      }

      /* Scroll to Top Button */
      #scrollToTopBtn {
        display: none; /* Hidden by default */
        position: fixed; /* Fixed position */
        bottom: 20px; /* Place at the bottom */
        right: 20px; /* Place at the right */
        z-index: 99; /* Higher than other content */
        border: none; /* Remove borders */
        outline: none; /* Remove outline */
        background-color: #63b3ed; /* Set a background color */
        color: white; /* Text color */
        cursor: pointer; /* Add a mouse pointer on hover */
        padding: 12px 15px; /* Some padding */
        border-radius: 50%; /* Rounded corners */
        font-size: 18px; /* Increase font size */
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        transition: background-color 0.3s, opacity 0.3s;
        opacity: 0.8;
      }

      #scrollToTopBtn:hover {
        background-color: #4299e1; /* Darker background on hover */
        opacity: 1;
      }

      /* Gaya untuk link navigasi aktif */
      .desktop-nav a.active {
        color: #ffffff; /* Warna teks aktif */
        border-bottom: 2px solid #63b3ed; /* Garis bawah biru aksen */
        padding-bottom: 4px; /* Sedikit padding agar garis tidak terlalu dekat teks */
      }

      /* Fix for nested CSS rules */
      /* .container rule was incorrectly nested */
      /* .mobile-menu-overlay a.active rule was incorrectly nested */

      .mobile-menu-overlay a.active {
        color: #63b3ed; /* Warna teks aksen untuk mobile menu */
        font-weight: 600; /* Atau gaya lain yang diinginkan */
      }

      /* Animasi untuk Workflow Section */
      .workflow-step {
        opacity: 0;
        transform: translateY(30px);
        transition: opacity 0.6s ease-out, transform 0.6s ease-out;
      }

      .workflow-step.animate {
        opacity: 1;
        transform: translateY(0);
      }

      /* Tambahkan delay animasi untuk setiap step agar muncul berurutan */
      .workflow-step:nth-child(1).animate {
        transition-delay: 0.1s;
      }
      .workflow-step:nth-child(2).animate {
        transition-delay: 0.2s;
      }
      .workflow-step:nth-child(3).animate {
        transition-delay: 0.3s;
      }
      .workflow-step:nth-child(4).animate {
        transition-delay: 0.4s;
      }

      /* Animasi umum untuk section saat di-scroll */
      .fade-in-on-scroll {
        opacity: 0;
        transform: translateY(50px); /* Mulai sedikit lebih bawah */
        transition: opacity 0.8s ease-out, transform 0.8s ease-out;
      }

      .fade-in-on-scroll.animate {
        opacity: 1;
        transform: translateY(0);
      }


    </style>
  </head>
  <body class="leading-relaxed">
    <!-- Navbar -->
    <nav class="bg-gray-900 py-4 shadow-lg sticky top-0 z-50">
      <div class="container flex justify-between items-center">
        <a href="#" class="text-2xl font-bold text-white tracking-wide"
          >Ade Syofyan</a
        >
        <!-- Use Tailwind for responsive display: hidden on small, flex on medium and up -->
        <div class="hidden md:flex space-x-6 desktop-nav">
          <a
            href="#about"
            class="text-gray-300 hover:text-white transition duration-300"
            >Tentang Saya</a
          >
          <a
            href="#skills"
            class="text-gray-300 hover:text-white transition duration-300"
            >Keahlian</a
          >
          <a
            href="#services"
            class="text-gray-300 hover:text-white transition duration-300"
            >Layanan</a
          >
          <a
            href="#workflow"
            class="text-gray-300 hover:text-white transition duration-300"
            >Proses Kerja</a
          >
          <a
            href="#portfolio"
            class="text-gray-300 hover:text-white transition duration-300"
            >Portofolio</a
          >
          
          <a
            href="#testimonials"
            class="text-gray-300 hover:text-white transition duration-300"
            >Testimoni</a
          >
          <a
            href="#contact"
            class="text-gray-300 hover:text-white transition duration-300"
            >Kontak</a
          >
          <a
            href="#"
            onclick="openChatbotModal(); return false;"
            class="text-gray-300 hover:text-white transition duration-300"
            >Chat ke AI</a
          >
        </div>
        <!-- Mobile Menu Toggle Button -->
        <button
          id="mobileMenuToggleBtn"
          class="md:hidden text-white text-3xl mobile-nav-toggle" /* Use Tailwind 'md:hidden' */
          onclick="toggleMobileMenu()"
          aria-label="Toggle Mobile Menu"
          aria-expanded="false" /* Initial accessibility state */
          aria-controls="mobileMenu" /* Links button to the menu it controls */
        >
          <i data-lucide="menu"></i>
        </button>
      </div>
    </nav>

    <!-- Mobile Menu Overlay -->
    <!-- Added md:hidden to ensure it's hidden on medium screens and up via Tailwind -->
    <div id="mobileMenu" class="mobile-menu-overlay md:hidden">
      <button
        class="mobile-menu-close-btn"
        onclick="toggleMobileMenu()"
        aria-label="Close Mobile Menu"
      >
        &times;
      </button>
      <a href="#about" onclick="closeMobileMenu()">Tentang Saya</a>
      <a href="#skills" onclick="closeMobileMenu()">Keahlian</a>
      <a href="#services" onclick="closeMobileMenu()">Layanan</a>
      <a href="#workflow" onclick="closeMobileMenu()">Proses Kerja</a>
      <a href="#portfolio" onclick="closeMobileMenu()">Portofolio</a>
      <a href="#testimonials" onclick="closeMobileMenu()">Testimoni</a>
      <a href="#contact" onclick="closeMobileMenu()">Kontak</a>
      <a href="#" onclick="openChatbotModal(); closeMobileMenu(); return false;"
        >Chat ke AI</a
      >
    </div>

    <!-- Hero Section -->
    <header class="py-20 text-center relative overflow-hidden">
      <!-- Kanvas untuk efek latar belakang "plexus" -->
      <canvas id="heroCanvas"></canvas>
      <div class="container relative z-10">
        <h1
          class="text-5xl md:text-7xl font-extrabold mb-4 text-white leading-tight"
        >
          Halo, saya <span class="text-accent">Ade Syofyan</span>
        </h1>
        <p class="text-xl md:text-2xl text-gray-300 mb-8 max-w-3xl mx-auto">
          <span class="font-semibold">Mobile & Web Developer</span> dengan
          keahlian memecahkan masalah. Membangun solusi digital inovatif dari
          ide hingga implementasi.
        </p>
        <!-- Added flex and flex-wrap for better button responsiveness -->
        <div class="flex flex-wrap justify-center space-x-4">
          <a href="#portfolio" class="btn-primary inline-block"
            >Lihat Portofolio</a
          >
          <a href="#contact" class="btn-secondary inline-block">Hubungi Saya</a>
        </div>
      </div>
    </header>

    <!-- About Me Section -->
    <section
      id="about"
      class="py-20 bg-card shadow-lg rounded-xl my-8 md:mx-auto container fade-in-on-scroll"
    >
      <div class="flex flex-col md:flex-row items-center gap-12 relative z-10">
        <div class="md:w-1/3 flex justify-center">
          <img
            id="profile-img"
            src="./assets/img/foto_ade.jpg"
            alt="Foto Profil Ade Syofyan"
            class="rounded-full w-64 h-64 object-cover shadow-lg border-4 border-accent"
            onerror="this.onerror=null;this.src='https://placehold.co/300x300/4a5568/e2e8f0?text=AS';"
          />
        </div>
        <div class="md:w-2/3 text-center md:text-left">
          <h2 class="text-4xl font-bold mb-6 text-white">Tentang Saya</h2>
          <p class="text-lg text-gray-300 mb-4">
            Saya seorang
            <span class="font-semibold text-accent">Programmer Senior</span>
            dengan pengalaman lebih dari
            <span class="font-semibold text-accent">7 tahun</span> dalam
            pengembangan aplikasi web, mobile, dan ERP. Saya bersemangat dalam
            membangun solusi digital inovatif yang efisien dan berdampak
            positif.
          </p>
          <p class="text-lg text-gray-300 mb-4">
            Keahlian saya mencakup pengembangan di berbagai sektor seperti
            properti, otomotif, dan layanan publik. Saya juga memiliki
            spesialisasi dalam
            <span class="font-semibold text-accent">integrasi AI</span> untuk
            efisiensi bisnis, seperti pengembangan AI akuntan untuk input jurnal
            otomatis dan chatbot WhatsApp AI untuk mendukung tim sales dan
            customer service.
          </p>
          <p class="text-lg text-gray-300 mb-6">
            Saya mahir dalam *tech stack* seperti
            <span class="font-semibold text-accent"
              >Laravel, Flutter, Firebase</span
            >, dan integrasi sistem real-time. Saya selalu berupaya memberikan
            solusi terbaik dengan pendekatan *problem-solving* yang kuat.
          </p>
          <a
            href="https://drive.google.com/file/d/1ggCr03nfsIvysd_dOK1nnI6OtwXrMa_1/view?usp=sharing"
            target="_blank"
            class="btn-secondary inline-block"
            >Lihat CV Saya</a
          >
        </div>
      </div>
    </section>

    <!-- Skills Section -->
    <section id="skills" class="py-20 fade-in-on-scroll">
      <div class="container text-center">
        <h2 class="text-4xl font-bold mb-10 text-white">Keahlian Saya</h2>
        <!-- Updated grid classes for better responsiveness on small screens -->
        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-8">
          <div
            class="bg-card p-6 rounded-xl shadow-lg transform hover:scale-105 transition duration-300"
          >
            <!-- Ikon Pengembangan Mobile -->
            <p class="text-accent text-5xl mb-4 flex justify-center">
              <i data-lucide="smartphone"></i>
            </p>
            <h3 class="text-xl font-semibold text-white mb-2">
              Mobile Development
            </h3>
            <p class="text-gray-400">Flutter, Kotlin</p>
          </div>
          <div
            class="bg-card p-6 rounded-xl shadow-lg transform hover:scale-105 transition duration-300"
          >
            <!-- Ikon Pengembangan Web -->
            <p class="text-accent text-5xl mb-4 flex justify-center">
              <i data-lucide="globe"></i>
            </p>
            <h3 class="text-xl font-semibold text-white mb-2">
              Web Development
            </h3>
            <p class="text-gray-400">Laravel, PHP, JavaScript</p>
          </div>
          <div
            class="bg-card p-6 rounded-xl shadow-lg transform hover:scale-105 transition duration-300"
          >
            <!-- Ikon Integrasi AI -->
            <p class="text-accent text-5xl mb-4 flex justify-center">
              <i data-lucide="brain"></i>
            </p>
            <h3 class="text-xl font-semibold text-white mb-2">
              AI Integration
            </h3>
            <p class="text-gray-400">Chatbot AI, Akuntan AI</p>
          </div>
          <div
            class="bg-card p-6 rounded-xl shadow-lg transform hover:scale-105 transition duration-300"
          >
            <!-- Ikon Sistem ERP -->
            <p class="text-accent text-5xl mb-4 flex justify-center">
              <i data-lucide="columns-3"></i>
            </p>
            <h3 class="text-xl font-semibold text-white mb-2">ERP Systems</h3>
            <p class="text-gray-400">Pengembangan & Integrasi</p>
          </div>
          <div
            class="bg-card p-6 rounded-xl shadow-lg transform hover:scale-105 transition duration-300"
          >
            <!-- Ikon Firebase -->
            <p class="text-accent text-5xl mb-4 flex justify-center">
              <i data-lucide="flame"></i>
            </p>
            <h3 class="text-xl font-semibold text-white mb-2">Firebase</h3>
            <p class="text-gray-400">Backend as a Service</p>
          </div>
          <div
            class="bg-card p-6 rounded-xl shadow-lg transform hover:scale-105 transition duration-300"
          >
            <!-- Ikon Sistem Real-time -->
            <p class="text-accent text-5xl mb-4 flex justify-center">
              <i data-lucide="zap"></i>
            </p>
            <h3 class="text-xl font-semibold text-white mb-2">
              Sistem Real-time
            </h3>
            <p class="text-gray-400">Integrasi & Implementasi</p>
          </div>
          <div
            class="bg-card p-6 rounded-xl shadow-lg transform hover:scale-105 transition duration-300"
          >
            <!-- Ikon Pemecahan Masalah -->
            <p class="text-accent text-5xl mb-4 flex justify-center">
              <i data-lucide="puzzle"></i>
            </p>
            <h3 class="text-xl font-semibold text-white mb-2">
              Problem Solving
            </h3>
            <p class="text-gray-400">Analisis & Solusi Efektif</p>
          </div>
          <div
            class="bg-card p-6 rounded-xl shadow-lg transform hover:scale-105 transition duration-300"
          >
            <!-- Ikon Layanan Cloud -->
            <p class="text-accent text-5xl mb-4 flex justify-center">
              <i data-lucide="cloud"></i>
            </p>
            <h3 class="text-xl font-semibold text-white mb-2">
              Cloud Services
            </h3>
            <p class="text-gray-400">Deployment & Management</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Services Section (New) -->
    <section
      id="services"
      class="py-20 bg-card shadow-lg rounded-xl my-8 md:mx-auto container fade-in-on-scroll"
    >
      <div class="text-center">
        <h2 class="text-4xl font-bold mb-10 text-white">Layanan Saya</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
          <!-- Service 1: Custom Mobile App Development -->
          <div
            class="bg-gray-800 p-6 rounded-xl shadow-lg transform hover:scale-105 transition duration-300"
          >
            <p class="text-accent text-5xl mb-4 flex justify-center">
              <i data-lucide="smartphone-charging"></i>
            </p>
            <h3 class="text-2xl font-bold text-white mb-2">
              Pengembangan Aplikasi Mobile Kustom
            </h3>
            <p class="text-gray-400 mb-4">
              Membangun aplikasi Android & iOS yang performa tinggi dan intuitif
              menggunakan Flutter & Kotlin.
            </p>
            <ul class="text-gray-500 text-sm text-left list-disc list-inside">
              <li>UI/UX Responsif</li>
              <li>Integrasi API</li>
              <li>Offline Capabilities</li>
            </ul>
          </div>
          <!-- Service 2: Web Application & ERP Development -->
          <div
            class="bg-gray-800 p-6 rounded-xl shadow-lg transform hover:scale-105 transition duration-300"
          >
            <p class="text-accent text-5xl mb-4 flex justify-center">
              <i data-lucide="layout-dashboard"></i>
            </p>
            <h3 class="text-2xl font-bold text-white mb-2">
              Pengembangan Web & Sistem ERP
            </h3>
            <p class="text-gray-400 mb-4">
              Menciptakan aplikasi web yang skalabel dan sistem ERP khusus untuk
              efisiensi bisnis Anda.
            </p>
            <ul class="text-gray-500 text-sm text-left list-disc list-inside">
              <li>Laravel Backend</li>
              <li>Panel Admin Kustom</li>
              <li>Manajemen Database</li>
            </ul>
          </div>
          <!-- Service 3: AI Integration & Chatbot Solutions -->
          <div
            class="bg-gray-800 p-6 rounded-xl shadow-lg transform hover:scale-105 transition duration-300"
          >
            <p class="text-accent text-5xl mb-4 flex justify-center">
              <i data-lucide="bot"></i>
            </p>
            <h3 class="text-2xl font-bold text-white mb-2">
              Integrasi AI & Solusi Chatbot
            </h3>
            <p class="text-gray-400 mb-4">
              Mengotomatisasi proses bisnis dengan integrasi AI dan chatbot
              interaktif (mis. WhatsApp AI).
            </p>
            <ul class="text-gray-500 text-sm text-left list-disc list-inside">
              <li>AI Data Processing</li>
              <li>Chatbot Otomatisasi</li>
              <li>Integrasi API AI</li>
            </ul>
          </div>
          <!-- Service 4: Real-time System Development -->
          <div
            class="bg-gray-800 p-6 rounded-xl shadow-lg transform hover:scale-105 transition duration-300"
          >
            <p class="text-accent text-5xl mb-4 flex justify-center">
              <i data-lucide="server"></i>
            </p>
            <h3 class="text-2xl font-bold text-white mb-2">
              Pengembangan Sistem Real-time
            </h3>
            <p class="text-gray-400 mb-4">
              Membangun aplikasi dengan kemampuan pemrosesan data dan interaksi
              secara real-time.
            </p>
            <ul class="text-gray-500 text-sm text-left list-disc list-inside">
              <li>WebSockets</li>
              <li>Streaming Data</li>
              <li>Push Notifications</li>
            </ul>
          </div>
        </div>
        <p class="text-gray-400 text-xl mt-12">
          Punya kebutuhan spesifik?
          <span class="text-accent font-semibold"
            >Saya siap membantu mewujudkannya!</span
          >
          <br />Hubungi saya untuk diskusi lebih lanjut tentang proyek Anda.
        </p>
      </div>
    </section>

    <!-- Workflow Section -->
    <section id="workflow" class="py-20 fade-in-on-scroll">
      <div class="container text-center">
        <h2 class="text-4xl font-bold mb-16 text-white">
          Bagaimana Saya Bekerja
        </h2>
        <div
          class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-x-8 gap-y-12" id="workflowSteps"
        >
          <!-- Step 1: Konsultasi & Perencanaan -->
          <div class="flex flex-col items-center workflow-step">
            <div
              class="bg-accent text-white rounded-full w-16 h-16 flex items-center justify-center text-2xl font-bold mb-4 shadow-lg"
            >
              1
            </div>
            <h3 class="text-xl font-semibold text-white mb-2">
              Konsultasi & Perencanaan
            </h3>
            <p class="text-gray-400 text-sm">
              Memahami kebutuhan Anda, menentukan lingkup proyek, dan menyusun
              rencana kerja yang detail.
            </p>
          </div>
          <!-- Step 2: Desain & Prototyping -->
          <div class="flex flex-col items-center workflow-step">
            <div
              class="bg-accent text-white rounded-full w-16 h-16 flex items-center justify-center text-2xl font-bold mb-4 shadow-lg"
            >
              2
            </div>
            <h3 class="text-xl font-semibold text-white mb-2">
              Desain & Prototyping
            </h3>
            <p class="text-gray-400 text-sm">
              Merancang antarmuka pengguna (UI/UX) yang intuitif dan membuat
              prototipe untuk validasi awal.
            </p>
          </div>
          <!-- Step 3: Pengembangan & Pengujian -->
          <div class="flex flex-col items-center workflow-step">
            <div
              class="bg-accent text-white rounded-full w-16 h-16 flex items-center justify-center text-2xl font-bold mb-4 shadow-lg"
            >
              3
            </div>
            <h3 class="text-xl font-semibold text-white mb-2">
              Pengembangan & Pengujian
            </h3>
            <p class="text-gray-400 text-sm">
              Implementasi kode, integrasi fitur, dan pengujian menyeluruh
              untuk memastikan kualitas dan fungsionalitas.
            </p>
          </div>
          <!-- Step 4: Deployment & Dukungan -->
          <div class="flex flex-col items-center workflow-step">
            <div
              class="bg-accent text-white rounded-full w-16 h-16 flex items-center justify-center text-2xl font-bold mb-4 shadow-lg"
            >
              4
            </div>
            <h3 class="text-xl font-semibold text-white mb-2">
              Deployment & Dukungan
            </h3>
            <p class="text-gray-400 text-sm">
              Peluncuran aplikasi ke server atau app store, serta menyediakan
              dukungan pasca-peluncuran.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Portfolio Section -->
    <section
      id="portfolio"
      class="py-20 bg-card shadow-lg rounded-xl my-8 md:mx-auto container fade-in-on-scroll"
    >
      <div class="text-center">
        <h2 class="text-4xl font-bold mb-10 text-white">Portofolio Pilihan</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
          <!-- Kartu Proyek 1: PPDB SMAKPA Padang -->
          <div
            class="bg-gray-800 p-6 rounded-xl shadow-lg transform hover:scale-105 transition duration-300 cursor-pointer"
            onclick="openModal('ppdb')"
          >
            <img
              id="img-ppdb-home"
              src="image_c62b1a.png"
              alt="Screenshot Beranda PPDB SMAKPA Padang"
              class="rounded-lg mb-4 w-full h-48 object-cover"
              onerror="this.onerror=null;this.src='https://placehold.co/400x200/4a5568/e2e8f0?text=Image+Error';"
            />
            <h3 class="text-2xl font-bold text-white mb-2">
              PPDB SMAKPA Padang
            </h3>
            <p class="text-gray-400 text-lg mb-4">
              Website Pendaftaran Peserta Didik Baru Online
            </p>
            <span
              class="inline-block bg-accent text-white text-xs font-semibold px-3 py-1 rounded-full"
              >Full-Stack Development</span
            >
          </div>

          <!-- Tambahkan lebih banyak kartu proyek di sini mengikuti struktur yang sama -->
          <div
            class="bg-gray-800 p-6 rounded-xl shadow-lg transform hover:scale-105 transition duration-300"
          >
            <img
              src="https://placehold.co/400x200/4a5568/e2e8f0?text=Proyek+Selanjutnya"
              alt="Placeholder Proyek Selanjutnya"
              class="rounded-lg mb-4 w-full h-48 object-cover"
            />
            <h3 class="text-2xl font-bold text-white mb-2">
              Proyek Selanjutnya
            </h3>
            <p class="text-gray-400 text-lg mb-4">
              Deskripsi singkat proyek Anda.
            </p>
            <span
              class="inline-block bg-gray-600 text-white text-xs font-semibold px-3 py-1 rounded-full"
              >Kategori Proyek</span
            >
          </div>
          <div
            class="bg-gray-800 p-6 rounded-xl shadow-lg transform hover:scale-105 transition duration-300"
          >
            <img
              src="https://placehold.co/400x200/4a5568/e2e8f0?text=Proyek+Selanjutnya"
              alt="Placeholder Proyek Selanjutnya"
              class="rounded-lg mb-4 w-full h-48 object-cover"
            />
            <h3 class="text-2xl font-bold text-white mb-2">
              Proyek Selanjutnya
            </h3>
            <p class="text-gray-400 text-lg mb-4">
              Deskripsi singkat proyek Anda.
            </p>
            <span
              class="inline-block bg-gray-600 text-white text-xs font-semibold px-3 py-1 rounded-full"
              >Kategori Proyek</span
            >
          </div>
        </div>
        <p class="text-gray-400 text-xl mt-12">
          <span class="text-accent font-semibold"
            >Ingin melihat lebih banyak?</span
          >
          Saya punya lebih banyak proyek menakjubkan yang siap untuk dibagikan.
          <br />Silakan lengkapi detail proyek lainnya agar saya bisa
          menambahkannya di sini!
        </p>
      </div>
    </section>

    <!-- Testimonials Section (New) -->
    <section id="testimonials" class="py-20 fade-in-on-scroll">
      <div class="container text-center">
        <h2 class="text-4xl font-bold mb-10 text-white">Apa Kata Klien Saya</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
          <!-- Testimonial 1 -->
          <div class="bg-card p-6 rounded-xl shadow-lg">
            <p class="text-gray-300 italic mb-4">
              "Ade adalah seorang developer yang sangat berdedikasi dan memiliki
              kemampuan pemecahan masalah yang luar biasa. Proyek kami selesai
              tepat waktu dengan kualitas yang melebihi ekspektasi!"
            </p>
            <p class="font-semibold text-white">
              - John Doe, CEO Tech Solutions
            </p>
            <p class="text-gray-400 text-sm">Jakarta</p>
          </div>
          <!-- Testimonial 2 -->
          <div class="bg-card p-6 rounded-xl shadow-lg">
            <p class="text-gray-300 italic mb-4">
              "Integrasi AI yang dikembangkan Ade sangat membantu operasional
              kami, terutama chatbot WhatsApp-nya. Sangat merekomendasikan
              jasanya!"
            </p>
            <p class="font-semibold text-white">
              - Jane Smith, Marketing Manager Innovate Corp
            </p>
            <p class="text-gray-400 text-sm">Surabaya</p>
          </div>
          <!-- Add more testimonials as needed -->
          <div class="bg-card p-6 rounded-xl shadow-lg">
            <p class="text-gray-300 italic mb-4">
              "Kerja sama yang lancar dan hasil yang memuaskan. Ade selalu
              responsif terhadap masukan dan memberikan solusi terbaik."
            </p>
            <p class="font-semibold text-white">
              - Budi Santoso, Project Lead Global Auto
            </p>
            <p class="text-gray-400 text-sm">Bandung</p>
          </div>
          <div class="bg-card p-6 rounded-xl shadow-lg">
            <p class="text-gray-300 italic mb-4">
              "Aplikasi mobile yang dibuat Ade sangat user-friendly dan stabil.
              Peningkatan penjualan kami signifikan setelah peluncuran."
            </p>
            <p class="font-semibold text-white">
              - Siti Aminah, Owner Property Pro
            </p>
            <p class="text-gray-400 text-sm">Padang</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="py-20 fade-in-on-scroll">
      <div class="container text-center">
        <h2 class="text-4xl font-bold mb-10 text-white">Hubungi Saya</h2>
        <p class="text-lg text-gray-300 mb-8 max-w-2xl mx-auto">
          Tertarik untuk berkolaborasi atau memiliki pertanyaan? Jangan ragu
          untuk menghubungi saya melalui kontak di bawah ini.
        </p>
        <div
          class="flex flex-col md:flex-row justify-center items-center gap-8"
        >
          <div
            class="bg-card p-6 rounded-xl shadow-lg text-center w-full md:w-1/4"
          >
            <!-- Ikon Email -->
            <p class="text-accent text-5xl mb-4 flex justify-center">
              <i data-lucide="mail"></i>
            </p>
            <h3 class="text-xl font-semibold text-white mb-2">Email</h3>
            <a
              href="mailto:ade.syofyan@gmail.com"
              class="text-gray-300 hover:text-white transition duration-300"
              >ade.syofyan@gmail.com</a
            >
          </div>
          <div
            class="bg-card p-6 rounded-xl shadow-lg text-center w-full md:w-1/4"
          >
            <!-- Ikon Telepon -->
            <p class="text-accent text-5xl mb-4 flex justify-center">
              <i data-lucide="phone"></i>
            </p>
            <h3 class="text-xl font-semibold text-white mb-2">Telepon</h3>
            <a
              href="tel:+6282284955080"
              class="text-gray-300 hover:text-white transition duration-300"
              >0822-8495-5080</a
            >
          </div>
          <div
            class="bg-card p-6 rounded-xl shadow-lg text-center w-full md:w-1/4"
          >
            <!-- Ikon LinkedIn -->
            <p class="text-accent text-5xl mb-4 flex justify-center">
              <i data-lucide="linkedin"></i>
            </p>
            <h3 class="text-xl font-semibold text-white mb-2">LinkedIn</h3>
            <a
              href="https://www.linkedin.com/in/ade-syofyan/"
              target="_blank"
              class="text-gray-300 hover:text-white transition duration-300"
              >Profil LinkedIn</a
            >
          </div>
          <!-- Kartu Chatbot -->
          <div
            class="bg-card p-6 rounded-xl shadow-lg text-center w-full md:w-1/4 cursor-pointer transform hover:scale-105 transition duration-300"
            onclick="openChatbotModal()"
          >
            <p class="text-accent text-5xl mb-4 flex justify-center">
              <i data-lucide="message-square"></i>
            </p>
            <h3 class="text-xl font-semibold text-white mb-2">Tanya Ade ✨</h3>
            <p class="text-gray-400">Ajukan pertanyaan ke AI!</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-900 py-8 mt-12 text-center text-gray-400">
      <div class="container">
        <p>&copy; 2025 Ade Syofyan. Hak Cipta Dilindungi Undang-Undang.</p>
      </div>
    </footer>

    <!-- Modal Detail Proyek -->
    <div id="projectModal" class="modal-overlay">
      <div class="modal-content">
        <button
          class="modal-close-btn"
          onclick="closeModal()"
          aria-label="Close Project Modal"
        >
          &times;
        </button>
        <h3 id="modalTitle" class="text-3xl font-bold text-white mb-4"></h3>
        <p id="modalType" class="text-gray-400 text-lg mb-2"></p>
        <p id="modalRole" class="text-gray-400 text-lg mb-4"></p>

        <div
          id="modalImages"
          class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6"
        >
          <!-- Gambar akan disuntikkan di sini -->
        </div>

        <p class="text-lg text-gray-300 mb-4">
          <span class="font-semibold text-accent">Tujuan Proyek:</span>
          <span id="modalGoal"></span>
        </p>
        <p class="text-lg text-gray-300 mb-4">
          <span class="font-semibold text-accent">Proses Kerja:</span>
          <span id="modalProcess"></span>
        </p>
        <p class="text-lg text-gray-300 mb-4">
          <span class="font-semibold text-accent">Hasil/Dampak:</span>
          <span id="modalImpact"></span>
        </p>
      </div>
    </div>

    <!-- Modal Chatbot -->
    <div id="chatbotModal" class="modal-overlay">
      <div class="chatbot-content">
        <button
          class="modal-close-btn"
          onclick="closeChatbotModal()"
          aria-label="Close Chatbot Modal"
        >
          &times;
        </button>
        <h3 class="text-2xl font-bold text-white mb-4">Tanya Ade ✨</h3>
        <div id="chatDisplay" class="chat-display">
          <div class="flex justify-start mb-2">
            <div
              class="bg-gray-800 text-white p-3 rounded-lg max-w-[80%] chat-message"
            >
              Halo! Saya Ade Syofyan. Ada yang bisa saya bantu tentang keahlian
              atau pengalaman saya?
            </div>
          </div>
        </div>
        <div class="chat-input-area">
          <input
            type="text"
            id="chatInput"
            placeholder="Ketik pertanyaan Anda..."
          />
          <button onclick="sendChatMessage()">Kirim</button>
        </div>
      </div>
    </div>

    <!-- Custom Confirmation Modal -->
    <div id="customConfirmModal" class="fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-[1020] hidden p-4">
        <div class="bg-gray-800 p-6 rounded-lg shadow-xl w-full max-w-sm text-center">
            <p id="customConfirmMessage" class="text-white text-lg mb-6">Pesan konfirmasi di sini.</p>
            <div class="flex justify-center space-x-4">
                <button id="customConfirmButtonYes" class="btn-primary px-6 py-2">Ya</button>
                <button id="customConfirmButtonNo" class="btn-secondary px-6 py-2">Tidak</button>
            </div>
        </div>
    </div>

    <!-- Scroll to Top Button -->
    <button onclick="scrollToTop()" id="scrollToTopBtn" title="Gulir ke atas">
      <i data-lucide="arrow-up"></i>
    </button>

    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "Person",
        "name": "Ade Syofyan",
        "url": "https://ade-syofyan.github.io/",
        "image": "https://placehold.co/300x300/4a5568/e2e8f0?text=AS", <!-- Ganti dengan URL foto profil asli -->
        "sameAs": [
          "https://www.linkedin.com/in/ade-syofyan/",
          "mailto:ade.syofyan@gmail.com",
          "https://wa.me/6282284955080" <!-- Menambahkan WhatsApp ke sameAs -->
        ],
        "jobTitle": "Mobile & Web Developer Senior",
        "worksFor": {
          "@type": "Organization",
          "name": "Freelance / Independent Contractor"
        },
        "description": "Programmer senior dengan pengalaman lebih dari 7 tahun dalam pengembangan aplikasi web, mobile, dan ERP. Ahli dalam membangun solusi digital untuk properti, otomotif, layanan publik, serta integrasi AI untuk efisiensi bisnis. Berpengalaman membuat AI akuntan untuk input jurnal otomatis, serta chatbot WhatsApp AI untuk mendukung tim sales dan customer service. Mahir dalam stack Laravel, Flutter, Firebase, dan integrasi sistem real-time.",
        "knowsAbout": [
          "Mobile Development",
          "Web Development",
          "AI Integration",
          "ERP Systems",
          "Firebase",
          "Real-time Systems",
          "Problem Solving",
          "Cloud Services",
          "Flutter",
          "Kotlin",
          "Laravel",
          "PHP",
          "JavaScript"
        ],
        "alumniOf": {
          "@type": "EducationalOrganization",
          "name": "Nama Universitas/Institusi Anda" <!-- Ganti dengan nama universitas/institusi Anda -->
        },
        "hasOccupation": {
          "@type": "Occupation",
          "name": "Software Developer",
          "description": "Mengembangkan dan mengelola aplikasi web dan mobile, serta sistem ERP, dengan fokus pada solusi inovatif dan efisiensi bisnis."
        },
        "address": {
          "@type": "PostalAddress",
          "addressLocality": "Padang",
          "addressRegion": "Sumatera Barat",
          "addressCountry": "ID"
        },
        "contactPoint": {
          "@type": "ContactPoint",
          "telephone": "+6282284955080",
          "contactType": "customer service"
        }
      }
    </script>

    <script>
      // Gunakan IIFE untuk cakupan
      (async function () {
        // Data proyek (dapat diperluas nanti)
        const projects = {
          ppdb: {
            title: "PPDB SMAKPA Padang",
            type: "Website Pendaftaran Peserta Didik Baru Online",
            goal: "Mengimplementasikan sistem pendaftaran siswa baru secara online untuk efisiensi dan jangkauan yang lebih luas.",
            role: "Full-Stack Developer",
            process:
              "Mengembangkan sistem menggunakan Laravel untuk backend dan antarmuka web responsif dengan HTML/CSS/JavaScript untuk frontend. Fokus pada skalabilitas data pendaftar dan kemudahan penggunaan. Fitur utama termasuk formulir pendaftaran online, manajemen data pendaftar, dan dashboard admin untuk pemantauan real-time.", // Placeholder, pengguna perlu mengisi ini
            impact:
              "Berhasil mengotomatisasi proses pendaftaran siswa baru, mengurangi beban administrasi manual, dan meningkatkan aksesibilitas bagi calon siswa dari berbagai lokasi. Sistem ini mampu mengelola ribuan pendaftar secara efisien.", // Placeholder, pengguna perlu mengisi ini
            images: [
              {
                id: "image_c62b1a.png",
                alt: "Screenshot Beranda PPDB SMAKPA Padang",
              },
              {
                id: "image_c62e3e.png",
                alt: "Screenshot Dashboard Admin PPDB SMAKPA Padang",
              },
              {
                id: "image_c62ea3.png",
                alt: "Screenshot Halaman Persyaratan PPDB SMAKPA Padang",
              },
            ],
          },
          // Tambahkan lebih banyak proyek di sini
        };

        // Ambil dan atur sumber gambar saat DOM siap
        document.addEventListener("DOMContentLoaded", async () => {
          // Inisialisasi ikon Lucide
          lucide.createIcons();
          // Inisialisasi mobile menu toggle button display
          
          // --- Animasi untuk Section saat di-scroll (Workflow dan lainnya) ---
          const workflowSteps = document.querySelectorAll('.workflow-step');
          const fadeInSections = document.querySelectorAll('.fade-in-on-scroll');
          if (workflowSteps.length > 0) {
            const observerOptions = {
              root: null, // relatif terhadap viewport
              rootMargin: '0px',
              threshold: 0.2 // picu saat 20% elemen terlihat
            };

            const observerCallback = (entries, observer) => {
              entries.forEach(entry => {
                if (entry.isIntersecting) {
                  entry.target.classList.add('animate');
                  observer.unobserve(entry.target); // Hentikan observasi setelah animasi dipicu
                }
              });
            };

            const workflowObserver = new IntersectionObserver(observerCallback, observerOptions);
            workflowSteps.forEach(step => {
              workflowObserver.observe(step);
            });
          }

          if (fadeInSections.length > 0) {
            const sectionObserverOptions = {
              root: null,
              rootMargin: '0px',
              threshold: 0.15 // Picu sedikit lebih awal untuk section yang lebih besar
            };
            const sectionObserverCallback = (entries, observer) => {
              entries.forEach(entry => {
                if (entry.isIntersecting) {
                  entry.target.classList.add('animate');
                  observer.unobserve(entry.target);
                }
              });
            };
            const sectionObserver = new IntersectionObserver(sectionObserverCallback, sectionObserverOptions);
            fadeInSections.forEach(section => {
              sectionObserver.observe(section);
            });
          }
          // mobileNavToggle display is now controlled by CSS media queries
        });

        // Fungsionalitas Modal untuk Detail Proyek
        const projectModal = document.getElementById("projectModal");
        const modalTitle = document.getElementById("modalTitle");
        const modalType = document.getElementById("modalType");
        const modalRole = document.getElementById("modalRole");
        const modalGoal = document.getElementById("modalGoal");
        const modalProcess = document.getElementById("modalProcess");
        const modalImpact = document.getElementById("modalImpact");
        const modalImages = document.getElementById("modalImages");

        window.openModal = async function (projectId) {
          const project = projects[projectId];
          if (project) {
            modalTitle.textContent = project.title;
            modalType.textContent = `Jenis: ${project.type}`;
            modalRole.textContent = `Peran: ${project.role}`;
            modalGoal.textContent = project.goal;
            modalProcess.textContent = project.process;
            modalImpact.textContent = project.impact;

            modalImages.innerHTML = ""; // Hapus gambar sebelumnya
            for (const imgData of project.images) {
              const imgElement = document.createElement("img");
              // Langsung tetapkan nama file untuk gambar yang diunggah
              imgElement.src = imgData.id;
              imgElement.alt = imgData.alt;
              imgElement.className =
                "rounded-lg w-full h-auto object-cover shadow-md";
              // Tambahkan onerror untuk fallback
              imgElement.onerror = function () {
                this.onerror = null;
                this.src =
                  "https://placehold.co/400x200/4a5568/e2e8f0?text=Image+Error";
              };
              modalImages.appendChild(imgElement);
            }

            projectModal.classList.add("open");
          }
        };

        window.closeModal = function () {
          projectModal.classList.remove("open");
        };

        // Tutup modal proyek saat mengklik di luar konten
        projectModal.addEventListener("click", (e) => {
          if (e.target === projectModal) {
            closeModal();
          }
        });

        // Fungsionalitas Modal Chatbot
        const chatbotModal = document.getElementById("chatbotModal");
        const chatDisplay = document.getElementById("chatDisplay");
        const chatInput = document.getElementById("chatInput");

        window.openChatbotModal = function () {
          chatbotModal.classList.add("open");
          chatInput.focus(); // Fokuskan input saat modal terbuka
        };

        window.closeChatbotModal = function () {
          chatbotModal.classList.remove("open");
          chatDisplay.innerHTML = `
                    <div class="flex justify-start mb-2">
                        <div class="bg-gray-800 text-white p-3 rounded-lg max-w-[80%] chat-message">Halo! Saya Ade Syofyan. Ada yang bisa saya bantu tentang keahlian atau pengalaman saya?</div>
                    </div>
                `; // Reset chat saat ditutup
        };

        // Tutup modal chatbot saat mengklik di luar konten
        chatbotModal.addEventListener("click", (e) => {
          if (e.target === chatbotModal) {
            closeChatbotModal();
          }
        });

        // Konteks untuk LLM (diekstrak dari bagian Tentang Saya dan Keahlian)
        const adeProfileContext = `
                Nama: Ade Syofyan
                Jabatan: Programmer Senior
                Pengalaman: Lebih dari 7 tahun dalam pengembangan aplikasi web, mobile, dan ERP.
                Proses Kerja: Konsultasi & Perencanaan, Desain & Prototyping, Pengembangan & Pengujian, Deployment & Dukungan.
                Spesialisasi: Membangun solusi digital inovatif yang efisien dan berdampak positif. Ahli dalam integrasi AI (AI akuntan untuk input jurnal otomatis, chatbot WhatsApp AI untuk tim sales/CS).
                Tech Stack: Laravel, Flutter, Firebase, Kotlin, PHP, JavaScript, Sistem Real-time.
                Bidang Keahlian: Mobile Development, Web Development, AI Integration, ERP Systems, Firebase, Sistem Real-time, Problem Solving, Cloud Services.
                Tujuan: Memberikan solusi terbaik dengan pendekatan problem-solving yang kuat.
                Nomor WhatsApp: 082284955080
                CV: https://drive.google.com/file/d/1ggCr03nfsIvysd_dOK1nnI6OtwXrMa_1/view?usp=sharing
            `;
        
        // Opsi cepat untuk chatbot
        const quickChatOptions = [
            "Ceritakan tentang pengalaman Flutter Anda.",
            "Proyek AI apa saja yang pernah dikerjakan?",
            "Bagaimana proses kerja Anda?"
        ];

        // Fungsi untuk mengirim pesan ke LLM
        window.sendChatMessage = async function () {
          // Dijadikan dapat diakses secara global
          const message = chatInput.value.trim();

          if (!message) return;

          // Tambahkan pesan pengguna ke tampilan
          const userMessageDiv = document.createElement("div");
          userMessageDiv.className = "flex justify-end mb-2";
          userMessageDiv.innerHTML = `<div class="bg-blue-600 text-white p-3 rounded-lg max-w-[80%] chat-message">${message}</div>`;
          chatDisplay.appendChild(userMessageDiv);
          chatInput.value = ""; // Kosongkan input

          // Tambahkan indikator loading
          const loadingDiv = document.createElement("div");
          loadingDiv.className = "flex justify-start mb-2";
          loadingDiv.innerHTML = `<div class="bg-gray-700 text-gray-300 p-3 rounded-lg max-w-[80%] animate-pulse chat-message">Mengetik...</div>`;
          chatDisplay.appendChild(loadingDiv);
          chatDisplay.scrollTop = chatDisplay.scrollHeight; // Gulir ke bawah

          try {
            let chatHistory = [];
            // Instruksi sistem untuk memandu perilaku LLM
            const systemInstruction = `Anda adalah Ade Syofyan, seorang Programmer Senior.
                    Jawablah pertanyaan HANYA berdasarkan informasi profil saya yang terlampir.
                    Fokus pada keahlian pengembangan aplikasi, teknologi yang saya kuasai, dan jenis proyek yang saya kerjakan.

                    ATURAN KHUSUS:
                    1. Jika pertanyaan TIDAK terkait dengan jasa program, keahlian teknis, atau pengalaman saya yang disebutkan di profil, jawablah dengan sopan bahwa Anda tidak memiliki informasi tersebut atau itu di luar cakupan pengetahuan Anda sebagai asisten AI di portofolio ini. Contoh: "Maaf, saya hanya dapat memberikan informasi seputar keahlian dan proyek yang saya kerjakan. Untuk pertanyaan di luar itu, saya tidak memiliki datanya."
                    2. Jika ada pertanyaan mengenai HARGA atau TARIF jasa, atau jika pengguna menyatakan MINAT untuk PEMESANAN/KOLABORASI langsung, selalu arahkan mereka untuk menghubungi saya melalui WhatsApp. Respons harus mencakup tautan wa.me dengan pesan pre-filled yang merangkum pertanyaan/minat mereka. Format pesan pre-filled harus jelas dan merangkum minat pengguna. Contoh format: "Untuk informasi mengenai harga atau pemesanan/kolaborasi, mohon hubungi saya langsung melalui [WhatsApp](https://wa.me/6282284955080?text=Halo%20Ade%2C%20saya%20tertarik%20dengan%20[Rangkuman%20minat%20atau%20pertanyaan%20pengguna%2C%20contoh%3A%20pengembangan%20aplikasi%20mobile%20Flutter]). Saya akan dengan senang hati membantu Anda di sana!" Pastikan [Rangkuman minat atau pertanyaan pengguna] diisi dengan ringkasan pertanyaan terakhir pengguna, di-encode URL agar sesuai untuk tautan WhatsApp.
                    3. JANGAN mengarang jawaban atau memberikan informasi yang tidak ada dalam profil.
                    4. Jaga nada bicara tetap profesional dan membantu.

                    Informasi Profil Ade Syofyan:
                    ${adeProfileContext}
                    `;

            chatHistory.push({
              role: "user",
              parts: [
                { text: systemInstruction + "\n\nPertanyaan: " + message },
              ],
            });

            const payload = { contents: chatHistory };

            const apiKey = "AIzaSyAYoqmGxZT9FwG2obC3-xpxSN6orVxi0Wk"; // Pastikan API Key Anda benar
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

            const response = await fetch(apiUrl, {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify(payload),
            });
            const result = await response.json();

            // Hapus indikator loading
            chatDisplay.removeChild(loadingDiv);

            if (
              result.candidates &&
              result.candidates.length > 0 &&
              result.candidates[0].content &&
              result.candidates[0].content.parts &&
              result.candidates[0].content.parts.length > 0
            ) {
              let text = result.candidates[0].content.parts[0].text;

              // Tambahkan logika untuk memeriksa apakah AI mengarahkan ke WhatsApp
              const whatsappRegex = /\[(.*?)\]\((https:\/\/wa\.me\/.*?)\)/;
              if (whatsappRegex.test(text)) {
                // Jika ada link WhatsApp, encode pesan pengguna untuk URL
                const encodedMessage = encodeURIComponent(
                  `Halo Ade, saya tertarik dengan ${message}`
                );
                // Ganti placeholder rangkuman minat dengan pesan yang di-encode
                text = text.replace(
                  /\[Rangkuman minat atau pertanyaan pengguna.*?\]/,
                  encodedMessage
                );
                // Lalu ganti format markdown ke link HTML
                text = text.replace(
                  whatsappRegex,
                  '<a href="$2" target="_blank" class="text-blue-400 hover:underline">$1</a>'
                );
              }

              const aiMessageDiv = document.createElement("div");
              aiMessageDiv.className = "flex justify-start mb-2";
              aiMessageDiv.innerHTML = `<div class="bg-gray-800 text-white p-3 rounded-lg max-w-[80%] chat-message">${text}</div>`;
              chatDisplay.appendChild(aiMessageDiv);
              typeMessage(aiMessageDiv.querySelector('.chat-message'), text);
            } else {
              const errorMessageDiv = document.createElement("div");
              errorMessageDiv.className = "flex justify-start mb-2";
              errorMessageDiv.innerHTML = `<div class="bg-red-800 text-white p-3 rounded-lg max-w-[80%] chat-message">Maaf, saya tidak dapat memproses permintaan ini.</div>`;
              chatDisplay.appendChild(errorMessageDiv);
            }
          } catch (error) {
            console.error("Error calling Gemini API:", error);
            // Hapus indikator loading
            chatDisplay.removeChild(loadingDiv);
            const errorMessageDiv = document.createElement("div");
            errorMessageDiv.className = "flex justify-start mb-2";
            errorMessageDiv.innerHTML = `<div class="bg-red-800 text-white p-3 rounded-lg max-w-[80%] chat-message">Terjadi kesalahan saat berkomunikasi dengan AI.</div>`;
            chatDisplay.appendChild(errorMessageDiv);
            console.error(error); // Catat kesalahan untuk debugging
          } finally {
            chatDisplay.scrollTop = chatDisplay.scrollHeight; // Gulir ke bawah setelah respons
          }
        };

       // Fungsi untuk menambahkan efek mengetik
       function typeMessage(element, text, delay = 30) {
            let i = 0;
            element.textContent = ''; // Kosongkan elemen terlebih dahulu
            function typing() {
                if (i < text.length) {
                    // Tambahkan karakter berikutnya
                    element.textContent += text.charAt(i);
                    i++;
                    // Gulir ke bawah saat teks ditambahkan
                    chatDisplay.scrollTop = chatDisplay.scrollHeight;
                    // Panggil fungsi lagi setelah jeda
                    setTimeout(typing, delay);
                } else {
                    // Setelah selesai mengetik, jika teks mengandung HTML (misal link), set innerHTML
                    // Ini diperlukan karena textContent akan meng-escape HTML
                    element.innerHTML = text;
                }
            }
            typing();
        }
        
        // Fungsi untuk menambahkan opsi cepat ke chat display
        function addQuickOptions() {
            const quickOptionsDiv = document.createElement("div");
            quickOptionsDiv.className = "flex flex-wrap gap-2 mt-2 mb-2 justify-start";
            quickChatOptions.forEach(optionText => {
                const button = document.createElement("button");
                button.className = "bg-gray-700 hover:bg-gray-600 text-gray-300 text-sm py-1 px-3 rounded-full transition-colors";
                button.textContent = optionText;
                button.onclick = () => {
                    chatInput.value = optionText;
                    sendChatMessage();
                    // Hapus opsi cepat setelah salah satu diklik
                    if (quickOptionsDiv.parentNode) {
                        quickOptionsDiv.parentNode.removeChild(quickOptionsDiv);
                    }
                };
                quickOptionsDiv.appendChild(button);
            });
            chatDisplay.appendChild(quickOptionsDiv);
            chatDisplay.scrollTop = chatDisplay.scrollHeight;
        }

        // Event listener untuk tombol Enter di input chat
        chatInput.addEventListener("keypress", function (event) {
          if (event.key === "Enter") {
            event.preventDefault(); // Mencegah perilaku Enter default (misalnya, baris baru)
            sendChatMessage();
          }
        });

        // Modifikasi openChatbotModal untuk memuat histori dan menampilkan opsi cepat
        window.openChatbotModal = function () {
          chatbotModal.classList.add("open");
          chatInput.focus(); // Fokuskan input saat modal terbuka
          loadChatHistory(); // Muat histori chat
          if (chatDisplay.children.length <= 1) { // Hanya tampilkan jika belum ada interaksi signifikan
            addQuickOptions();
          }
        };

        // Fungsi untuk benar-benar menutup modal chatbot utama
        function actuallyCloseChatbot() {
            const chatbotModal = document.getElementById("chatbotModal");
            chatbotModal.classList.remove("open");
            document.body.style.overflow = ""; // Pastikan scroll body diaktifkan kembali
        }

        // Fungsi untuk menampilkan modal konfirmasi kustom
        function showCustomConfirm(message, yesCallback, noCallback, yesText = "Ya", noText = "Tidak") {
            const modal = document.getElementById('customConfirmModal');
            const msgElement = document.getElementById('customConfirmMessage');
            const btnYes = document.getElementById('customConfirmButtonYes');
            const btnNo = document.getElementById('customConfirmButtonNo');

            msgElement.textContent = message;
            btnYes.textContent = yesText;
            btnNo.textContent = noText;

            // Hapus event listener sebelumnya untuk menghindari eksekusi ganda
            // dengan mengganti tombol dengan klonnya
            const newBtnYes = btnYes.cloneNode(true);
            btnYes.parentNode.replaceChild(newBtnYes, btnYes);
            
            const newBtnNo = btnNo.cloneNode(true);
            btnNo.parentNode.replaceChild(newBtnNo, btnNo);

            newBtnYes.onclick = () => {
                modal.classList.add('hidden');
                if (yesCallback) yesCallback();
            };

            newBtnNo.onclick = () => {
                modal.classList.add('hidden');
                if (noCallback) noCallback();
            };

            modal.classList.remove('hidden');
        }

        // Modifikasi closeChatbotModal untuk menggunakan modal konfirmasi kustom
        window.closeChatbotModal = function () {
          const hasUserInteracted = chatDisplay.querySelector('.flex.justify-end'); // Cek apakah ada pesan dari pengguna

          if (!hasUserInteracted) {
            // Jika tidak ada interaksi pengguna (tidak ada pesan yang dikirim pengguna),
            // tutup modal secara langsung.
            actuallyCloseChatbot();
          } else {
            // Jika ada interaksi pengguna, tampilkan dialog konfirmasi.
            showCustomConfirm(
              "Simpan sesi chat ini?",
              () => { // Callback jika "Simpan" diklik
                saveChatHistory();
                actuallyCloseChatbot();
              },
              () => { // Callback jika "Jangan Simpan" diklik
                deleteChatHistory(); 
                actuallyCloseChatbot();
              },
              "Simpan", "Jangan Simpan"
            );
          }
        };
        // --- Logika Canvas untuk Efek Latar Belakang "Plexus" ---
        const canvas = document.getElementById("heroCanvas");
        const ctx = canvas.getContext("2d");
        let particles = [];
        const numberOfParticles = 80; // Jumlah partikel
        const maxDistance = 150; // Jarak maksimal untuk menghubungkan partikel

        // Atur ukuran kanvas agar sesuai dengan header
        function resizeCanvas() {
          canvas.width = window.innerWidth;
          canvas.height = document.querySelector("header").offsetHeight;
        }

        // Partikel
        class Particle {
          constructor(x, y) {
            this.x = x;
            this.y = y;
            this.size = Math.random() * 3 + 1; // Ukuran partikel acak
            this.speedX = Math.random() * 0.5 - 0.25; // Kecepatan X acak
            this.speedY = Math.random() * 0.5 - 0.25; // Kecepatan Y acak
            this.color = `rgba(99, 179, 237, ${Math.random() * 0.5 + 0.3})`; // Warna biru dengan transparansi
          }

          update() {
            this.x += this.speedX;
            this.y += this.speedY;

            // Batasi partikel agar tetap di dalam kanvas
            if (this.x > canvas.width || this.x < 0) this.speedX *= -1;
            if (this.y > canvas.height || this.y < 0) this.speedY *= -1;
          }

          draw() {
            ctx.fillStyle = this.color;
            ctx.beginPath();
            ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
            ctx.fill();
          }
        }

        // Inisialisasi partikel
        function init() {
          particles = [];
          for (let i = 0; i < numberOfParticles; i++) {
            const x = Math.random() * canvas.width;
            const y = Math.random() * canvas.height;
            particles.push(new Particle(x, y));
          }
        }

        // Hubungkan partikel
        function connect() {
          let opacityValue = 1;
          for (let a = 0; a < particles.length; a++) {
            for (let b = a; b < particles.length; b++) {
              const distance = Math.sqrt(
                (particles[a].x - particles[b].x) ** 2 +
                  (particles[a].y - particles[b].y) ** 2
              );

              if (distance < maxDistance) {
                opacityValue = 1 - distance / maxDistance;
                ctx.strokeStyle = `rgba(99, 179, 237, ${opacityValue})`; // Garis biru dengan transparansi
                ctx.lineWidth = 1;
                ctx.beginPath();
                ctx.moveTo(particles[a].x, particles[a].y);
                ctx.lineTo(particles[b].x, particles[b].y);
                ctx.stroke();
              }
            }
          }
        }

        // Loop animasi
        function animateCanvas() {
          requestAnimationFrame(animateCanvas);
          ctx.clearRect(0, 0, canvas.width, canvas.height); // Hapus kanvas setiap frame
          for (let i = 0; i < particles.length; i++) {
            particles[i].update();
            particles[i].draw();
          }
          connect();
        }

        // Jalankan saat jendela dimuat dan saat ukuran jendela berubah
        window.addEventListener("load", () => {
          resizeCanvas();
          init();
          animateCanvas();
        });

        window.addEventListener("resize", () => {
          resizeCanvas();
          init(); // Inisialisasi ulang partikel setelah resize untuk penempatan yang benar
        });

        // Mobile Menu Toggle
        const mobileMenu = document.getElementById("mobileMenu");
        const mobileMenuToggleBtn = document.getElementById("mobileMenuToggleBtn"); // Get the toggle button

        window.toggleMobileMenu = function () {
          const isOpen = mobileMenu.classList.toggle("open");
          if (mobileMenuToggleBtn) {
            mobileMenuToggleBtn.setAttribute("aria-expanded", isOpen.toString()); // Update aria-expanded
          }

          // Nonaktifkan scroll body saat menu mobile terbuka
          if (isOpen) {
            document.body.style.overflow = "hidden";
          } else {
            document.body.style.overflow = "";
          }
        };

        // Ensure closeMobileMenu also updates aria-expanded
        window.closeMobileMenu = function () {
          mobileMenu.classList.remove("open");
          document.body.style.overflow = ""; // Aktifkan scroll body
          if (mobileMenuToggleBtn) {
            mobileMenuToggleBtn.setAttribute("aria-expanded", "false"); // Set to false when closed
          }
          // Beri sedikit delay agar scroll selesai sebelum highlight diperbarui
          setTimeout(() => {
            highlightNavLinkOnScroll();
          }, 100);
        };

        // Scroll to Top functionality
        const scrollToTopBtn = document.getElementById("scrollToTopBtn");

        const profileImg = document.getElementById('profile-img'); // Dapatkan elemen gambar profil
        window.onscroll = function () {
          // Parallax logic for Hero Canvas
          const scrollY = window.scrollY;
          const parallaxSpeed = 0.4; // Adjust this value (0 to 1) for desired effect
          heroCanvas.style.transform = 'translateY(' + scrollY * parallaxSpeed + 'px)';
          if (
            document.body.scrollTop > 20 ||
            document.documentElement.scrollTop > 20
          ) {
            scrollToTopBtn.style.display = "block";
          } else {
            scrollToTopBtn.style.display = "none";
          }
        };

        // Modifikasi window.onscroll untuk menambahkan efek parallax pada gambar profil
        const aboutSection = document.getElementById('about'); // Dapatkan section About Me
        window.onscroll = function () {
            // Parallax logic for Hero Canvas
            const scrollY = window.scrollY;
            const parallaxSpeedCanvas = 0.4; // Kecepatan parallax untuk kanvas
            heroCanvas.style.transform = 'translateY(' + scrollY * parallaxSpeedCanvas + 'px)';

            // Parallax logic for Profile Image (within About Me section)
            if (profileImg && aboutSection) {
                const sectionTop = aboutSection.offsetTop;
                const sectionHeight = aboutSection.offsetHeight;
                const scrollRelativeToSection = scrollY - sectionTop;
                const parallaxSpeedImg = 0.1; // Kecepatan parallax untuk gambar profil (nilai kecil untuk efek ringan)

                // Terapkan transformasi hanya saat section About Me terlihat atau dekat
                // Ini mencegah gambar bergerak saat section masih jauh di atas atau di bawah
                if (scrollY + window.innerHeight > sectionTop && scrollY < sectionTop + sectionHeight) {
                     // Hitung pergeseran berdasarkan scroll relatif
                     // Kita bisa menggeser gambar ke atas saat scroll ke bawah
                    const translateY = scrollRelativeToSection * parallaxSpeedImg;
                    profileImg.style.transform = 'translateY(' + translateY + 'px)';
                } else {
                    // Reset transformasi saat section tidak terlihat
                     profileImg.style.transform = 'translateY(0px)';
                }
            }

            // Scroll to Top Button logic
            if (
                document.body.scrollTop > 20 ||
                document.documentElement.scrollTop > 20
            ) {
                scrollToTopBtn.style.display = "block";
            } else {
                scrollToTopBtn.style.display = "none";
            }

            // Highlight Nav Link logic (panggil fungsi yang sudah ada)
            highlightNavLinkOnScroll();
        };

        // Fungsi untuk menyimpan dan memuat histori chat
        function saveChatHistory() {
            const messages = [];
            chatDisplay.querySelectorAll('.chat-message').forEach(msgElement => {
                messages.push({
                    text: msgElement.innerHTML, // Simpan innerHTML untuk menjaga format tautan
                    isUser: msgElement.parentElement.classList.contains('justify-end')
                });
            });
            localStorage.setItem('chatbotHistory', JSON.stringify(messages));
        }

        function deleteChatHistory() {
            localStorage.removeItem('chatbotHistory');
            // Reset tampilan chat ke kondisi awal
            chatDisplay.innerHTML = `
                <div class="flex justify-start mb-2">
                    <div class="bg-gray-800 text-white p-3 rounded-lg max-w-[80%] chat-message">Halo! Saya Ade Syofyan. Ada yang bisa saya bantu tentang keahlian atau pengalaman saya?</div>
                </div>
            `;
            // Opsional: tambahkan kembali opsi cepat jika tampilan direset
            if (typeof addQuickOptions === 'function' && chatDisplay.children.length <= 1) {
                addQuickOptions();
            }
            // console.log("Chat history deleted."); // Untuk debugging
        }

        function loadChatHistory() {
            const savedHistory = localStorage.getItem('chatbotHistory');
            chatDisplay.innerHTML = ''; // Bersihkan display dulu
            if (savedHistory) {
                const messages = JSON.parse(savedHistory);
                if (messages.length === 0 || (messages.length === 1 && !messages[0].isUser)) {
                     // Jika histori kosong atau hanya ada pesan default AI, tampilkan pesan default
                    chatDisplay.innerHTML = `<div class="flex justify-start mb-2"><div class="bg-gray-800 text-white p-3 rounded-lg max-w-[80%] chat-message">Halo! Saya Ade Syofyan. Ada yang bisa saya bantu tentang keahlian atau pengalaman saya?</div></div>`;
                } else {
                    messages.forEach(msg => {
                        const messageDiv = document.createElement("div");
                        messageDiv.className = `flex ${msg.isUser ? 'justify-end' : 'justify-start'} mb-2`;
                        messageDiv.innerHTML = `<div class="${msg.isUser ? 'bg-blue-600' : 'bg-gray-800'} text-white p-3 rounded-lg max-w-[80%] chat-message">${msg.text}</div>`;
                        chatDisplay.appendChild(messageDiv);
                    });
                }
            } else {
                 // Jika tidak ada histori sama sekali, tampilkan pesan default
                chatDisplay.innerHTML = `<div class="flex justify-start mb-2"><div class="bg-gray-800 text-white p-3 rounded-lg max-w-[80%] chat-message">Halo! Saya Ade Syofyan. Ada yang bisa saya bantu tentang keahlian atau pengalaman saya?</div></div>`;
            }
            chatDisplay.scrollTop = chatDisplay.scrollHeight;
        }

        window.scrollToTop = function () {
          window.scrollTo({
            top: 0,
            behavior: "smooth",
          });
        };

        // --- Logika highlight menu aktif saat scroll ---
        // Dapatkan semua section yang memiliki ID yang sesuai dengan link navigasi
        const sections = document.querySelectorAll("section[id]");

        // Dapatkan semua link navigasi desktop dan mobile
        const desktopNavLinks = document.querySelectorAll(".desktop-nav a");
        const mobileNavLinks = document.querySelectorAll(
          ".mobile-menu-overlay a"
        );

        // Fungsi untuk smooth scroll ke target dengan offset header
        function smoothScrollToTarget(event) {
            const link = event.currentTarget;
            const targetId = link.getAttribute("href"); // e.g., "#about"

            // Pastikan ini adalah tautan ke section (bukan hanya "#")
            if (targetId && targetId.startsWith("#") && targetId.length > 1) {
                event.preventDefault(); // Mencegah default jump
                const targetElement = document.querySelector(targetId);

                if (targetElement) {
                    const headerOffset = document.querySelector('nav').offsetHeight;
                    const elementPosition = targetElement.offsetTop;
                    const offsetPosition = elementPosition - headerOffset;

                    window.scrollTo({
                        top: offsetPosition,
                        behavior: 'smooth'
                    });
                }

                // Jika ini adalah tautan di menu mobile, tutup menu setelah klik
                if (link.closest('.mobile-menu-overlay')) {
                    closeMobileMenu();
                }
            }
            // Jika targetId hanya "#" (seperti pada link Chat AI), biarkan atribut onclick-nya yang menangani
        }

        // Tambahkan event listener ke tautan navigasi desktop
        desktopNavLinks.forEach(link => {
            const href = link.getAttribute("href");
            // Hanya tambahkan ke tautan yang mengarah ke section
            if (href && href.startsWith("#") && href.length > 1) {
                link.addEventListener("click", smoothScrollToTarget);
            }
        });

        // Tambahkan event listener ke tautan navigasi mobile
        mobileNavLinks.forEach(link => {
            const href = link.getAttribute("href");
            // Hanya tambahkan ke tautan yang mengarah ke section
            if (href && href.startsWith("#") && href.length > 1) {
                link.addEventListener("click", smoothScrollToTarget);
            }
            // Tautan "Chat ke AI" di mobile sudah ditangani oleh atribut onclick-nya
        });

        function highlightNavLinkOnScroll() {
          let currentSectionId = ""; // Untuk menyimpan ID section yang sedang aktif
          const headerHeight = document.querySelector("nav").offsetHeight; // Tinggi navbar

          sections.forEach((section) => {
            // Dapatkan posisi scroll saat ini
            const scrollY = window.scrollY;

            // Dapatkan posisi atas dan tinggi setiap section
            // Kurangi sedikit offset untuk akun fixed header
            const sectionTop = section.offsetTop - headerHeight - 10; // Offset tambahan agar lebih akurat
            const sectionBottom = sectionTop + section.offsetHeight;

            // Cek apakah posisi scroll berada di dalam section saat ini
            if (scrollY >= sectionTop && scrollY < sectionBottom) {
              currentSectionId = section.getAttribute("id");
            }
          });

          // Hapus kelas 'active' dari semua link navigasi terlebih dahulu
          desktopNavLinks.forEach((link) => {
            link.classList.remove("active");
          });
          mobileNavLinks.forEach((link) => {
            link.classList.remove("active");
          });

          // Tambahkan kelas 'active' ke link yang sesuai dengan section aktif
          if (currentSectionId) {
            const activeDesktopLink = document.querySelector(
              `.desktop-nav a[href="#${currentSectionId}"]`
            );
            if (activeDesktopLink) {
              activeDesktopLink.classList.add("active");
            }

            const activeMobileLink = document.querySelector(
              `.mobile-menu-overlay a[href="#${currentSectionId}"]`
            );
            if (activeMobileLink) {
              activeMobileLink.classList.add("active");
            }
          }
        }

        // Panggil fungsi saat halaman dimuat dan setiap kali di-scroll
        window.addEventListener("load", highlightNavLinkOnScroll);
        // window.addEventListener("scroll", highlightNavLinkOnScroll); // Dihapus karena sudah digabung ke window.onscroll
      })();
    </script>
  </body>
</html>
