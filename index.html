<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ade Syofyan - Portofolio Developer Profesional</title>
    <!-- Meta SEO Tags -->
    <meta
      name="description"
      content="Portofolio resmi Ade Syofyan, seorang Mobile & Web Developer senior dengan keahlian di Flutter, Kotlin, Laravel, Firebase, ERP, dan integrasi AI. Ahli dalam membangun solusi digital inovatif dan memecahkan masalah."
    />
    <meta
      name="keywords"
      content="Ade Syofyan, Mobile Developer, Web Developer, Flutter, Kotlin, Laravel, Firebase, ERP, AI Integration, Programmer Senior, Problem Solving, Portofolio Developer, Pengembangan Aplikasi, Padang, Indonesia"
    />
    <meta name="author" content="Ade Syofyan" />
    <link rel="canonical" href="https://ade-syofyan.github.io/" />

    <!-- Open Graph / Facebook / LinkedIn (untuk Rich Snippets di media sosial) -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://ade-syofyan.github.io/" />
    <meta
      property="og:title"
      content="Ade Syofyan - Portofolio Mobile & Web Developer Senior"
    />
    <meta
      property="og:description"
      content="Portofolio resmi Ade Syofyan, seorang Mobile & Web Developer senior dengan keahlian di Flutter, Kotlin, Laravel, Firebase, ERP, dan integrasi AI. Ahli dalam membangun solusi digital inovatif dan memecahkan masalah."
    />
    <meta
      property="og:image"
      content="https://ade-syofyan.github.io/assets/img/og-image.png"
    />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:locale" content="id_ID" />

    <!-- Twitter Card (untuk Rich Snippets di Twitter) -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content="https://ade-syofyan.github.io/" />
    <meta
      property="twitter:title"
      content="Ade Syofyan - Portofolio Mobile & Web Developer Senior"
    />
    <meta
      property="twitter:description"
      content="Portofolio resmi Ade Syofyan, seorang Mobile & Web Developer senior dengan keahlian di Flutter, Kotlin, Laravel, Firebase, ERP, dan integrasi AI. Ahli dalam membangun solusi digital inovasi dan memecahkan masalah."
    />
    <meta
      property="twitter:image"
      content="https://ade-syofyan.github.io/assets/img/og-image.png"
    />
    <meta property="twitter:image:width" content="1200" />
    <meta property="twitter:image:height" content="675" />
    <meta name="twitter:creator" content="@yourtwitterhandle" />
    <!-- Ganti dengan handle Twitter Anda jika ada -->

    <!-- Meta Tag Tambahan untuk Kontrol Crawler dan Caching -->
    <meta name="robots" content="index, follow" />
    <!-- Menginstruksikan crawler untuk mengindeks dan mengikuti tautan -->
    <meta name="googlebot" content="index, follow" />
    <!-- Spesifik untuk Google bot -->
    <meta name="revisit-after" content="7 days" />
    <!-- Menginstruksikan bot untuk mengunjungi kembali setelah 7 hari -->
    <meta name="distribution" content="global" />
    <meta name="rating" content="general" />

    <link
      rel="icon"
      href="./assets/img/favicon.png"
      type="image/png"
    />
    <!-- Favicon sederhana -->

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Inter Font -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <!-- Lucide Icons CDN for professional icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- Prism.js for Syntax Highlighting -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-okaidia.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js" data-manual></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>


    <style>
      /* --- Theme Variables --- */
      :root {
        /* Dark Theme (Default) */
        --bg-primary: #1a202c;
        --bg-card: #2d3748;
        --bg-card-secondary: #4a5568;
        --bg-nav: #111827; /* bg-gray-900 */
        --bg-modal: #2d3748;
        --bg-nav-link-hover: var(--bg-card); /* Latar belakang hover/active untuk link nav */
        --bg-overlay: rgba(26, 32, 44, 0.8); /* Latar belakang overlay semi-transparan */
        --text-primary: #e2e8f0;
        --text-secondary: #a0aec0; /* text-gray-400 */
        --text-white: #ffffff;
        --color-accent: #63b3ed;
        --color-accent-hover: #4299e1;
        --border-color: #4a5568;
        --shadow-color: rgba(0, 0, 0, 0.4);
        /* Prism.js Dark Theme Overrides */
        --prism-bg: #2d3748;
        --prism-color: #f8f8f2;
        --prism-token-comment: #6272a4;
        --prism-token-punctuation: #f8f8f2;
        --prism-token-keyword: #ff79c6;
        --prism-token-function: #50fa7b;
        --prism-token-string: #f1fa8c;
        --prism-token-number: #bd93f9;
        --prism-token-operator: #ff79c6;
        --prism-token-class-name: #8be9fd;
      }

      html[data-theme='light'] {
        /* Light Theme */
        --bg-primary: #f7fafc;
        --bg-card: #ffffff;
        --bg-card-secondary: #edf2f7;
        --bg-nav: #ffffff;
        --bg-modal: #ffffff;
        --bg-nav-link-hover: var(--bg-card-secondary); /* Latar belakang hover/active untuk link nav */
        --bg-overlay: rgba(247, 250, 252, 0.8); /* Latar belakang overlay untuk tema terang */
        --text-primary: #2d3748;
        --text-secondary: #718096;
        --text-white: #1a202c;
        --color-accent: #3182ce;
        --color-accent-hover: #2b6cb0;
        --border-color: #e2e8f0;
        --shadow-color: rgba(0, 0,0, 0.1);
        /* Prism.js Light Theme Overrides */
        --prism-bg: #f5f2f0;
        --prism-color: #393a34;
        --prism-token-comment: #999988;
        --prism-token-punctuation: #999;
        --prism-token-keyword: #0077aa;
        --prism-token-function: #d73a49;
        --prism-token-string: #669900;
        --prism-token-number: #990055;
        --prism-token-operator: #a67f59;
        --prism-token-class-name: #22863a;
      }

      body {
        font-family: "Inter", sans-serif;
        background-color: var(--bg-primary);
        color: var(--text-primary);
        scroll-behavior: smooth;
        overflow-x: hidden; /* Prevent horizontal scrollbar */
        transition: background-color 0.3s ease, color 0.3s ease;
      }
      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 1rem;
      }
      .text-accent { color: var(--color-accent); }
      .bg-card {
        background-color: var(--bg-card);
        border-radius: 0.75rem; /* Sudut membulat */
        transition: background-color 0.3s ease;
      }
      .btn-primary {
        background-color: var(--color-accent);
        color: white; /* Tetap putih untuk kontras */
        padding: 0.75rem 1.5rem;
        border-radius: 0.5rem;
        transition: background-color 0.3s ease, transform 0.3s ease;
      }
      .btn-primary:hover { background-color: var(--color-accent-hover); transform: translateY(-2px); }
      .btn-secondary {
        border: 1px solid var(--color-accent);
        color: var(--color-accent);
        padding: 0.75rem 1.5rem;
        border-radius: 0.5rem;
        transition: background-color 0.3s ease, color 0.3s ease,
          transform 0.3s ease;
      }
      .btn-secondary:hover {
        background-color: var(--color-accent);
        color: white; /* Tetap putih untuk kontras */
        transform: translateY(-2px); /* Sedikit naik saat hover */
      }
      /* Scrollbar kustom untuk browser webkit */
      ::-webkit-scrollbar {
        width: 8px;
      }
      ::-webkit-scrollbar-track { background: var(--bg-card); }
      ::-webkit-scrollbar-thumb {
        background: var(--color-accent);
        border-radius: 4px;
      }
      ::-webkit-scrollbar-thumb:hover { background: var(--color-accent-hover); }

      /* Overlay untuk modal detail proyek */
      .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 1000;
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.3s ease, visibility 0.3s ease;
      }
      .modal-overlay.open {
        opacity: 1;
        visibility: visible;
      }
      .modal-content {
        background-color: var(--bg-modal);
        padding: 2rem;
        border-radius: 1rem;
        max-width: 90%; /* Lebar maksimal */
        width: 700px; /* Lebar spesifik untuk desktop */
        max-height: 90%;
        overflow-y: auto;
        position: relative;
        transform: translateY(20px); /* Efek jatuh sedikit awal untuk animasi */
        transition: transform 0.3s ease;
      }
      .modal-overlay.open .modal-content {
        transform: translateY(0);
      }
      .modal-close-btn {
        position: absolute;
        top: 1rem;
        right: 1rem;
        background: none;
        border: none;
        font-size: 1.5rem;
        color: var(--text-primary);
        cursor: pointer;
        transition: color 0.3s ease;
      }
      .modal-close-btn:hover {
        color: var(--color-accent);
      }

      /* Gaya kanvas untuk efek latar belakang hero */
      #heroCanvas {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 0; /* Pastikan di belakang konten hero */
        background-color: transparent; /* Pastikan tidak menutupi warna latar belakang header */
        opacity: 0.2; /* Sedikit transparan agar tidak terlalu mendominasi */
      }

      /* Gaya spesifik Chatbot */
      .chatbot-content {
        background-color: var(--bg-modal);
        padding: 1.5rem; /* Padding di dalam konten chatbot */
        border-radius: 1rem; /* Sudut membulat untuk konten chatbot */
        max-width: 90%; /* Lebar maksimal 90% dari viewport */
        width: 100%; /* Gunakan lebar penuh dari parent (modal-overlay yang sudah di tengah) */
        max-height: 80%; /* Tinggi maksimal 80% dari viewport */
        overflow: hidden; /* Sembunyikan overflow, chat-display akan menangani scroll internal */
        display: flex; /* Gunakan flexbox untuk layout internal */
        flex-direction: column; /* Susun elemen anak secara vertikal */
        position: relative; /* Untuk positioning tombol close */
      }
      .chat-display {
        flex-grow: 1; /* Biarkan area display chat mengambil sisa ruang vertikal */
        background-color: var(--bg-primary);
        border-radius: 0.5rem; /* Sudut membulat untuk display chat */
        padding: 1rem; /* Padding di dalam display chat */
        overflow-y: auto; /* Aktifkan scroll vertikal jika konten melebihi area */
        margin-bottom: 1rem; /* Jarak bawah sebelum area input */
        display: flex; /* Gunakan flexbox untuk pesan */
        flex-direction: column; /* Susun pesan secara vertikal */
      }
      /* Gaya untuk pesan chat agar teks membungkus */
      .chat-message {
        word-wrap: break-word; /* Bungkus kata yang panjang */
        overflow-wrap: break-word; /* Alternatif untuk word-wrap */
      }
      .chat-input-area {
        display: flex; /* Gunakan flexbox untuk input dan tombol */
        flex-direction: column; /* Default: susun vertikal untuk layar kecil */
        gap: 0.5rem; /* Jarak antara input dan tombol saat vertikal */
      }
      .chat-input-area input {
        background-color: var(--bg-card-secondary);
        border: 1px solid var(--color-accent);
        border-radius: 0.5rem;
        padding: 0.75rem 1rem;
        color: var(--text-primary);
        width: 100%; /* Lebar penuh saat dalam mode kolom */
        box-sizing: border-box; /* Padding dan border termasuk dalam width */
      }
      .chat-input-area button {
        background-color: var(--color-accent);
        color: #ffffff;
        padding: 0.75rem 1rem;
        border-radius: 0.5rem;
        transition: background-color 0.3s ease;
        width: 100%; /* Lebar penuh saat dalam mode kolom */
        box-sizing: border-box; /* Padding dan border termasuk dalam width */
        white-space: nowrap; /* Cegah teks tombol terpotong ke baris baru */
      }
      .chat-input-area button:hover {
        background-color: var(--color-accent-hover);
      }

      /* Mobile Navigation - Awal perbaikan */
      /* Sembunyikan desktop nav dan tampilkan mobile toggle secara default untuk mobile-first */
      
      /* Media query untuk chat input area pada layar yang lebih lebar */
      @media (min-width: 380px) { /* Anda bisa menyesuaikan breakpoint ini */
        .chat-input-area {
          flex-direction: row; /* Kembali ke layout horizontal */
        }
        .chat-input-area input {
          flex-grow: 1;    /* Biarkan input mengambil sisa ruang */
          width: auto;     /* Reset lebar dari mode kolom */
        }
        .chat-input-area button {
          width: auto;     /* Lebar tombol berdasarkan konten & padding */
          flex-shrink: 0;  /* Cegah tombol menyusut */
        }
      }
      /* .desktop-nav { */
        /* display: none; /* Now handled by Tailwind 'hidden md:flex' */
      /* } */
      /* .mobile-nav-toggle { */
        /* display: block; /* Now handled by Tailwind 'md:hidden' (button is inline-block by default) */
      /* } */

      .mobile-menu-overlay {
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;          
          background-color: var(--bg-overlay); /* Menggunakan variabel untuk mendukung tema */
          -webkit-backdrop-filter: blur(10px); /* Efek blur untuk Safari */
          backdrop-filter: blur(10px); /* Efek blur modern */
          display: flex;
          flex-direction: column;
          justify-content: flex-start; /* Mulai dari atas */
          align-items: center;
          padding-top: 5rem; /* Kurangi padding atas sedikit */
          padding-bottom: 2rem; /* Tambahkan padding bawah untuk scrolling */
          z-index: 1010;
          opacity: 0;
          visibility: hidden;
          transform: translateY(-100%); /* Animasi dari atas */
          transition: opacity 0.4s ease, visibility 0.4s ease, transform 0.4s cubic-bezier(0.25, 1, 0.5, 1);
          overflow-y: auto; /* Aktifkan scroll jika konten melebihi tinggi layar */
      }

      .mobile-menu-overlay.open {
        opacity: 1;
        visibility: visible;
        transform: translateY(0); /* Geser masuk ke posisi normal */
      }

      .mobile-menu-overlay a {
          color: var(--text-primary);
          font-size: 1.25rem; /* Sedikit kurangi ukuran font untuk mobile */
          font-weight: 500;
          padding: 0.75rem 0; /* Kurangi padding vertikal */
          width: 80%;
          max-width: 300px;
          text-align: left;
          transition: color 0.3s ease, transform 0.3s ease;
          display: flex;
          align-items: center;
          gap: 1rem; /* Jarak antara ikon dan teks */
      }

      .mobile-menu-overlay a:hover {
        color: var(--color-accent);
        transform: translateX(5px); /* Efek geser saat hover */
      }

      .mobile-menu-close-btn {
        position: absolute;
        top: 1.25rem; /* Sesuaikan posisi */
        right: 1.25rem;
        background: none;
        border: none;
        color: var(--text-primary);
        cursor: pointer;
        z-index: 1011;
        transition: color 0.3s ease;
        padding: 0.5rem; /* Area klik lebih besar */
      }
      .mobile-menu-close-btn:hover { color: var(--color-accent); }

      /* Responsif untuk Tablet dan Desktop */
      @media (min-width: 768px) {
        /* .desktop-nav { */
          /* display: flex; /* Tampilkan desktop nav */ /* Now handled by Tailwind 'hidden md:flex' */
        /* } */
        /* .mobile-nav-toggle, */
        /* .mobile-menu-overlay { */
          /* display: none; /* Sembunyikan mobile toggle dan overlay */ /* Now handled by Tailwind 'md:hidden' for these elements */
        /* } */
      }

      /* Scroll to Top Button */
      #scrollToTopBtn {
        display: none; /* Hidden by default */
        position: fixed; /* Fixed position */
        bottom: 20px; /* Place at the bottom */
        right: 20px; /* Place at the right */
        z-index: 99; /* Higher than other content */
        border: none; /* Remove borders */
        outline: none; /* Remove outline */
        background-color: var(--color-accent);
        color: white; /* Text color */
        cursor: pointer; /* Add a mouse pointer on hover */
        padding: 12px 15px; /* Some padding */
        border-radius: 50%; /* Rounded corners */
        font-size: 18px; /* Increase font size */
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        transition: background-color 0.3s, opacity 0.3s;
        opacity: 0.8;
      }

      #scrollToTopBtn:hover {
        background-color: var(--color-accent-hover);
        opacity: 1;
      }

      /* Gaya untuk link navigasi aktif */
      .desktop-nav a.active {
        background-color: var(--bg-nav-link-hover);
        color: var(--text-white);
      }

      /* Fix for nested CSS rules */
      /* .container rule was incorrectly nested */
      /* .mobile-menu-overlay a.active rule was incorrectly nested */

      .mobile-menu-overlay a.active { color: var(--color-accent);
        font-weight: 600; /* Atau gaya lain yang diinginkan */
      }

      /* Tombol CTA di menu mobile */
      .mobile-menu-cta {
          background-color: var(--color-accent);
          color: #ffffff !important;
          padding: 0.8rem 1.5rem !important; /* Kurangi padding vertikal */
          border-radius: 0.5rem;
          margin-top: 1.5rem;
          justify-content: center;
          text-align: center !important;
          width: 80%;
          max-width: 300px;
      }
      /* Animasi untuk Workflow Section */
      .workflow-step {
        opacity: 0;
        transform: translateY(30px);
        transition: opacity 0.6s ease-out, transform 0.6s ease-out;
      }

      .workflow-step.animate {
        opacity: 1;
        transform: translateY(0);
      }

      /* Tambahkan delay animasi untuk setiap step agar muncul berurutan */
      .workflow-step:nth-child(1).animate {
        transition-delay: 0.1s;
      }
      .workflow-step:nth-child(2).animate {
        transition-delay: 0.2s;
      }
      .workflow-step:nth-child(3).animate {
        transition-delay: 0.3s;
      }
      .workflow-step:nth-child(4).animate {
        transition-delay: 0.4s;
      }

      /* Animasi umum untuk section saat di-scroll */
      .fade-in-on-scroll {
        opacity: 0;
        transform: translateY(50px); /* Mulai sedikit lebih bawah */
        transition: opacity 0.8s ease-out, transform 0.8s ease-out;
      }

      .fade-in-on-scroll.animate {
        opacity: 1;
        transform: translateY(0);
      }

      /* Animation for visitor count update */
      #visitor-count.pop-in {
        animation: popIn 0.3s ease-out;
      }

      @keyframes popIn {
        0% {
          transform: scale(0.8);
          opacity: 0.5;
        }
        50% {
          transform: scale(1.1);
          opacity: 1;
        }
        100% {
          transform: scale(1);
        }
      }

      /* Styles for Color Palette Demo */
      .color-swatch {
        flex-grow: 1;
        border-radius: 0.5rem;
        position: relative;
        cursor: pointer;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
        display: flex;
        align-items: flex-end;
        justify-content: center;
        padding-bottom: 4px;
      }
      .color-swatch:hover {
        transform: translateY(-4px);
        box-shadow: 0 4px 10px var(--shadow-color);
      }
      .color-swatch .hex-code {
        background-color: rgba(0, 0, 0, 0.6);
        color: white;
        font-size: 0.75rem;
        padding: 2px 6px;
        border-radius: 0.25rem;
        opacity: 0;
        transition: opacity 0.2s ease;
      }
      .color-swatch:hover .hex-code {
        opacity: 1;
      }

      /* Animasi untuk Kartu Keahlian (Staggered) */
      .skill-card {
        opacity: 0;
        transform: translateY(30px);
        transition: opacity 0.5s ease-out, transform 0.5s ease-out;
      }

      .skill-card.animate {
        opacity: 1;
        transform: translateY(0);
      }

      /* Animasi untuk Kartu Layanan (Staggered) */
      .service-card {
        opacity: 0;
        transform: translateY(30px);
        transition: opacity 0.5s ease-out, transform 0.5s ease-out;
      }

      .service-card.animate {
        opacity: 1;
        transform: translateY(0);
      }

      /* Terminal Styles */
      #terminal-input {
        caret-color: var(--color-accent);
      }
      #terminal-output .terminal-line {
        white-space: pre-wrap; /* Agar output bisa wrap */
      }
      #terminal-window.light-theme {
        background-color: #f0f0f0;
        color: #333;
        border-color: #ccc;
      }
      /* Anda bisa menambahkan lebih banyak gaya untuk light theme di sini */

      /* Achievement Toast Animation */
      #achievement-toast.show {
        transform: translateX(0);
      }

      /* macOS-like Terminal Controls */
      .terminal-btn {
        width: 12px;
        height: 12px;
        border-radius: 50%;
        border: 1px solid rgba(0,0,0,0.2);
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
      }
      .terminal-btn .btn-icon {
        width: 8px;
        height: 8px;
        color: rgba(0,0,0,0.6);
        opacity: 0;
        transition: opacity 0.2s ease;
      }
      #terminal-window:hover .terminal-btn .btn-icon {
        opacity: 1;
      }
      #terminal-window.maximized {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        border-radius: 0;
        padding: 0; /* Hapus padding saat dimaksimalkan */
        margin: 0;
      }

      /* Theme Switcher Dropdown */
      .theme-switcher {
        position: relative;
      }
      .theme-dropdown {
        position: absolute;
        top: 100%;
        right: 0;
        margin-top: 0.5rem;
        background-color: var(--bg-card);
        border: 1px solid var(--border-color);
        border-radius: 0.5rem;
        box-shadow: 0 4px 6px var(--shadow-color);
        z-index: 1020;
        width: 150px;
        overflow: hidden;
        display: none; /* Hidden by default */
      }
      .theme-dropdown.open {
        display: block;
      }
      .theme-option {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        padding: 0.5rem 1rem;
        cursor: pointer;
        font-size: 0.875rem;
        color: var(--text-primary);
        transition: background-color 0.2s ease;
      }
      .theme-option:hover {
        background-color: var(--bg-card-secondary);
      }
      .theme-option.active {
        color: var(--color-accent);
        font-weight: 600;
      }
      .theme-option .lucide {
        width: 1rem;
        height: 1rem;
      }

      /* Navbar link styles */
      .nav-link {
        color: var(--text-secondary);
      }
      .nav-link:hover {
        background-color: var(--bg-nav-link-hover);
        color: var(--text-white);
      }

      /* Gaya untuk menyorot fitur secara dinamis */
      .highlight-feature {
        transform: scale(1.05);
        box-shadow: 0 0 20px var(--color-accent), 0 0 5px var(--color-accent) inset;
        border: 1px solid var(--color-accent);
        transition: transform 0.3s ease-out, box-shadow 0.3s ease-out, border-color 0.3s ease-out;
      }
      .skill-card {
        /* Tambahkan transisi pada skill-card agar kembali ke normal dengan mulus */
        transition: opacity 0.5s ease-out, transform 0.5s ease-out, box-shadow 0.5s ease-out, border 0.5s ease-out;
      }

      /* Styles for "Behind the Code" feature */
      .code-viewer {
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.5s ease-in-out;
        margin-top: 1rem;
        border-radius: 0.5rem;
      }
      .code-viewer.open {
        max-height: 500px; /* Adjust as needed */
        overflow-y: auto;
      }
      .btn-code-toggle {
        background-color: var(--bg-card-secondary);
        color: var(--text-secondary);
        border: 1px solid var(--border-color);
        padding: 0.5rem 1rem;
        border-radius: 0.5rem;
        transition: all 0.3s ease;
        font-size: 0.875rem;
        margin-top: 1rem;
      }
      .btn-code-toggle:hover {
        background-color: var(--color-accent);
        color: white;
        border-color: var(--color-accent);
      }

      /* Themed Prism.js styles */
      pre[class*="language-"] {
        background: var(--prism-bg) !important;
        color: var(--prism-color) !important;
        border-radius: 0.5rem;
        border: 1px solid var(--border-color);
        padding: 1em !important;
        margin: 0 !important;
      }
      /* More specific Prism token styles using variables */
      .token.comment,
      .token.prolog,
      .token.doctype,
      .token.cdata {
        color: var(--prism-token-comment);
      }
      .token.punctuation {
        color: var(--prism-token-punctuation);
      }
      .token.property,
      .token.tag,
      .token.boolean,
      .token.number,
      .token.constant,
      .token.symbol,
      .token.deleted {
        color: var(--prism-token-number);
      }
      .token.selector,
      .token.attr-name,
      .token.string,
      .token.char,
      .token.builtin,
      .token.inserted {
        color: var(--prism-token-string);
      }
      .token.operator,
      .token.entity,
      .token.url {
        color: var(--prism-token-operator);
      }
      .token.atrule,
      .token.attr-value,
      .token.keyword {
        color: var(--prism-token-keyword);
      }
      .token.function,
      .token.class-name {
        color: var(--prism-token-function);
      }
      /* Pastikan warna teks dasar juga menggunakan variabel */
      code[class*="language-"],
      pre[class*="language-"] {
        color: var(--prism-color) !important;
      }

    </style>
    <script>
      // Skrip untuk mencegah flicker tema (FOUC)
      (function() {
        try {
          var theme = localStorage.getItem('theme');
          if (theme === 'light' || (theme === 'system' && window.matchMedia('(prefers-color-scheme: light)').matches)) {
            document.documentElement.setAttribute('data-theme', 'light');
          }
        } catch (e) {}
      })();
    </script>
  </head>
  <body class="leading-relaxed">
    <!-- Navbar -->
    <nav class="py-4 shadow-lg sticky top-0 z-50" style="background-color: var(--bg-nav); transition: background-color 0.3s ease;">
      <div
        class="container flex justify-between items-center"
        id="main-navbar"
      >
        <a href="#" class="text-2xl font-bold tracking-wide" style="color: var(--text-white);"
          >Ade Syofyan</a
        >
        <!-- Redesigned Desktop Navigation -->
        <div class="hidden md:flex items-center space-x-2 desktop-nav">
          <a
            href="#about"
            class="nav-link px-3 py-2 rounded-md text-sm font-medium transition-colors"
            >Tentang Saya</a
          >
          <a
            href="#skills"
            class="nav-link px-3 py-2 rounded-md text-sm font-medium transition-colors"
            >Keahlian</a
          >
          <a
            href="#services"
            class="nav-link px-3 py-2 rounded-md text-sm font-medium transition-colors"
            >Layanan</a
          >
          <a
            href="#live-demos"
            class="nav-link px-3 py-2 rounded-md text-sm font-medium transition-colors"
            >Live Demos</a
          >
          <a
            href="#workflow"
            class="nav-link px-3 py-2 rounded-md text-sm font-medium transition-colors"
            >Proses Kerja</a
          >
          <a
            href="#portfolio"
            class="nav-link px-3 py-2 rounded-md text-sm font-medium transition-colors"
            >Portofolio</a
          >
          <a
            href="#testimonials"
            class="nav-link px-3 py-2 rounded-md text-sm font-medium transition-colors"
            >Testimoni</a
          >
          <a
            href="#contact"
            class="nav-link px-3 py-2 rounded-md text-sm font-medium transition-colors"
            >Kontak</a
          >
          <a
            href="#"
            onclick="openChatbotModal(); return false;"
            class="text-white px-4 py-2 rounded-md text-sm font-medium transition-colors" style="background-color: var(--color-accent);" onmouseover="this.style.backgroundColor='var(--color-accent-hover)'" onmouseout="this.style.backgroundColor='var(--color-accent)'"
            >Chat ke AI</a
          >
          <!-- Theme Switcher -->
          <div class="theme-switcher">
            <button id="theme-toggle-btn" class="nav-link p-2 rounded-md transition-colors" aria-label="Toggle theme">
              <i data-lucide="sun" class="w-5 h-5 hidden" id="theme-icon-light"></i>
              <i data-lucide="moon" class="w-5 h-5 hidden" id="theme-icon-dark"></i>
              <i data-lucide="laptop" class="w-5 h-5 hidden" id="theme-icon-system"></i>
            </button>
            <div id="theme-dropdown" class="theme-dropdown">
              <div class="theme-option" data-theme-value="light">
                <i data-lucide="sun"></i><span>Terang</span>
              </div>
              <div class="theme-option" data-theme-value="dark">
                <i data-lucide="moon"></i><span>Gelap</span>
              </div>
              <div class="theme-option" data-theme-value="system">
                <i data-lucide="laptop"></i><span>Sistem</span>
              </div>
            </div>
          </div>
        </div>
        <!-- Mobile Menu Toggle Button -->
        <button
          id="mobileMenuToggleBtn"
          class="md:hidden text-3xl mobile-nav-toggle" style="color: var(--text-white);" /* Use Tailwind 'md:hidden' */
          onclick="toggleMobileMenu()"
          aria-label="Toggle Mobile Menu"
          aria-expanded="false" /* Initial accessibility state */
          aria-controls="mobileMenu" /* Links button to the menu it controls */
        >
          <i data-lucide="menu"></i>
        </button>
      </div>
    </nav>

    <!-- Mobile Menu Overlay -->
    <!-- Added md:hidden to ensure it's hidden on medium screens and up via Tailwind -->
    <div id="mobileMenu" class="mobile-menu-overlay md:hidden">
      <button
        class="mobile-menu-close-btn"
        onclick="toggleMobileMenu()"
        aria-label="Close Mobile Menu"
      >
        <i data-lucide="x" class="w-8 h-8"></i>
      </button>
      <a href="#about" onclick="closeMobileMenu()"><i data-lucide="user" class="w-6 h-6 text-accent"></i><span>Tentang Saya</span></a>
      <a href="#skills" onclick="closeMobileMenu()"><i data-lucide="star" class="w-6 h-6 text-accent"></i><span>Keahlian</span></a>
      <a href="#services" onclick="closeMobileMenu()"><i data-lucide="briefcase" class="w-6 h-6 text-accent"></i><span>Layanan</span></a>
      <a href="#live-demos" onclick="closeMobileMenu()"><i data-lucide="play-circle" class="w-6 h-6 text-accent"></i><span>Live Demos</span></a>
      <a href="#workflow" onclick="closeMobileMenu()"><i data-lucide="workflow" class="w-6 h-6 text-accent"></i><span>Proses Kerja</span></a>
      <a href="#portfolio" onclick="closeMobileMenu()"><i data-lucide="folder-kanban" class="w-6 h-6 text-accent"></i><span>Portofolio</span></a>
      <a href="#testimonials" onclick="closeMobileMenu()"><i data-lucide="quote" class="w-6 h-6 text-accent"></i><span>Testimoni</span></a>
      <a href="#contact" onclick="closeMobileMenu()"><i data-lucide="mail" class="w-6 h-6 text-accent"></i><span>Kontak</span></a>
      <a href="#" class="mobile-menu-cta" onclick="openChatbotModal(); closeMobileMenu(); return false;">
        <i data-lucide="message-circle" class="w-6 h-6"></i><span>Chat ke AI</span>
      </a>
      <div class="mt-8 text-center text-gray-400">
        <p class="mb-2">Ganti Tema</p>
        <div id="mobile-theme-switcher" class="flex justify-center gap-4"></div>
      </div>
    </div>

    <!-- Hero Section -->
    <header class="py-20 text-center relative overflow-hidden">
      <!-- Kanvas untuk efek latar belakang "plexus" -->
      <canvas id="heroCanvas"></canvas>
      <div class="container relative z-10">
        <h1
          class="text-5xl md:text-7xl font-extrabold mb-4 leading-tight" style="color: var(--text-white);"
        >
          Halo, saya <span class="text-accent">Ade Syofyan</span>
        </h1>
        <p class="text-xl md:text-2xl mb-8 max-w-3xl mx-auto" style="color: var(--text-secondary);">
          <span class="font-semibold">Mobile & Web Developer</span> dengan
          keahlian memecahkan masalah. Membangun solusi digital inovatif dari
          ide hingga implementasi.
        </p>
        <!-- Added flex and flex-wrap for better button responsiveness -->
        <div class="flex flex-wrap justify-center space-x-4">
          <a href="#portfolio" class="btn-primary inline-block"
            >Lihat Portofolio</a
          >
          <a href="#contact" class="btn-secondary inline-block">Hubungi Saya</a>
        </div>
      </div>
    </header>

    <!-- About Me Section -->
    <section
      id="about"
      class="py-20 bg-card shadow-lg rounded-xl my-8 md:mx-auto container fade-in-on-scroll"
    >
      <div class="flex flex-col md:flex-row items-center gap-12 relative z-10">
        <div class="md:w-1/3 flex justify-center">
          <img
            id="profile-img"
            src="./assets/img/foto_ade_new.jpeg"
            alt="Foto Profil Ade Syofyan"
            class="rounded-full w-64 h-64 object-cover object-top shadow-lg border-4 border-accent"
            onerror="this.onerror=null;this.src='https://placehold.co/300x300/4a5568/e2e8f0?text=AS';"
          />
        </div>
        <div class="md:w-2/3 text-center md:text-left">
          <h2 class="text-4xl font-bold mb-6" style="color: var(--text-white);">Tentang Saya</h2>
          <p class="text-lg mb-4" style="color: var(--text-secondary);">
            Saya seorang
            <span class="font-semibold text-accent">Programmer Senior</span>
            dengan pengalaman lebih dari
            <span class="font-semibold text-accent">7 tahun</span> dalam
            pengembangan aplikasi web, mobile, dan ERP. Saya bersemangat dalam
            membangun solusi digital inovatif yang efisien dan berdampak
            positif.
          </p>
          <p class="text-lg mb-4" style="color: var(--text-secondary);">
            Keahlian saya mencakup pengembangan di berbagai sektor seperti
            properti, otomotif, dan layanan publik. Saya juga memiliki
            spesialisasi dalam
            <span class="font-semibold text-accent">integrasi AI</span> untuk
            efisiensi bisnis, seperti pengembangan AI akuntan untuk input jurnal
            otomatis dan chatbot WhatsApp AI untuk mendukung tim sales dan
            customer service.
          </p>
          <p class="text-lg mb-6" style="color: var(--text-secondary);">
            Saya mahir dalam *tech stack* seperti
            <span class="font-semibold text-accent"
              >Laravel, Flutter, Firebase</span
            >, dan integrasi sistem real-time. Saya selalu berupaya memberikan
            solusi terbaik dengan pendekatan *problem-solving* yang kuat.
          </p>
          <a
            href="https://drive.google.com/file/d/1soqROMMjqd4pOTvj3nr9ANXJ4qaps7QE/view?usp=sharing"
            target="_blank"
            class="btn-secondary inline-block"
            >Lihat CV Saya</a
          >
        </div>
      </div>
    </section>

    <!-- Skills Section -->
    <section id="skills" class="py-20 fade-in-on-scroll">
      <div class="container text-center">
        <h2 class="text-4xl font-bold mb-10" style="color: var(--text-white);">Keahlian Saya</h2>
        <!-- Updated grid classes for better responsiveness on small screens -->
        <div
          class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-8"
          id="skills-grid"
        >
          <div
            class="bg-card p-6 rounded-xl shadow-lg transform hover:scale-105 transition duration-300 skill-card"
            data-skill="mobile"
          >
            <!-- Ikon Pengembangan Mobile -->
            <p class="text-accent text-5xl mb-4 flex justify-center">
              <i data-lucide="smartphone"></i>
            </p>
            <h3 class="text-xl font-semibold mb-2" style="color: var(--text-white);">
              Mobile Development
            </h3>
            <p style="color: var(--text-secondary);">Flutter, Kotlin</p>
          </div>
          <div
            class="bg-card p-6 rounded-xl shadow-lg transform hover:scale-105 transition duration-300 skill-card"
            data-skill="web"
          >
            <!-- Ikon Pengembangan Web -->
            <p class="text-accent text-5xl mb-4 flex justify-center">
              <i data-lucide="globe"></i>
            </p>
            <h3 class="text-xl font-semibold mb-2" style="color: var(--text-white);">
              Web Development
            </h3>
            <p style="color: var(--text-secondary);">Laravel, PHP, JavaScript</p>
          </div>
          <div
            class="bg-card p-6 rounded-xl shadow-lg transform hover:scale-105 transition duration-300 skill-card"
            data-skill="ai"
          >
            <!-- Ikon Integrasi AI -->
            <p class="text-accent text-5xl mb-4 flex justify-center">
              <i data-lucide="brain"></i>
            </p>
            <h3 class="text-xl font-semibold mb-2" style="color: var(--text-white);">
              AI Integration
            </h3>
            <p style="color: var(--text-secondary);">Chatbot AI, Akuntan AI</p>
          </div>
          <div
            class="bg-card p-6 rounded-xl shadow-lg transform hover:scale-105 transition duration-300 skill-card"
            data-skill="erp"
          >
            <!-- Ikon Sistem ERP -->
            <p class="text-accent text-5xl mb-4 flex justify-center">
              <i data-lucide="columns-3"></i>
            </p>
            <h3 class="text-xl font-semibold mb-2" style="color: var(--text-white);">ERP Systems</h3>
            <p style="color: var(--text-secondary);">Pengembangan & Integrasi</p>
          </div>
          <div
            class="bg-card p-6 rounded-xl shadow-lg transform hover:scale-105 transition duration-300 skill-card"
            data-skill="firebase"
          >
            <!-- Ikon Firebase -->
            <p class="text-accent text-5xl mb-4 flex justify-center">
              <i data-lucide="flame"></i>
            </p>
            <h3 class="text-xl font-semibold mb-2" style="color: var(--text-white);">Firebase</h3>
            <p style="color: var(--text-secondary);">Backend as a Service</p>
          </div>
          <div
            class="bg-card p-6 rounded-xl shadow-lg transform hover:scale-105 transition duration-300 skill-card"
          >
            <!-- Ikon Sistem Real-time -->
            <p class="text-accent text-5xl mb-4 flex justify-center">
              <i data-lucide="zap"></i>
            </p>
            <h3 class="text-xl font-semibold mb-2" style="color: var(--text-white);">
              Sistem Real-time
            </h3>
            <p style="color: var(--text-secondary);">Integrasi & Implementasi</p>
          </div>
          <div
            class="bg-card p-6 rounded-xl shadow-lg transform hover:scale-105 transition duration-300 skill-card"
          >
            <!-- Ikon Pemecahan Masalah -->
            <p class="text-accent text-5xl mb-4 flex justify-center">
              <i data-lucide="puzzle"></i>
            </p>
            <h3 class="text-xl font-semibold mb-2" style="color: var(--text-white);">
              Problem Solving
            </h3>
            <p style="color: var(--text-secondary);">Analisis & Solusi Efektif</p>
          </div>
          <div
            class="bg-card p-6 rounded-xl shadow-lg transform hover:scale-105 transition duration-300 skill-card"
          >
            <!-- Ikon Layanan Cloud -->
            <p class="text-accent text-5xl mb-4 flex justify-center">
              <i data-lucide="cloud"></i>
            </p>
            <h3 class="text-xl font-semibold mb-2" style="color: var(--text-white);">
              Cloud Services
            </h3>
            <p style="color: var(--text-secondary);">Deployment & Management</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Services Section (New) -->
    <section
      id="services"
      class="py-20 bg-card shadow-lg rounded-xl my-8 md:mx-auto container"
    >
      <div class="text-center">
        <h2 class="text-4xl font-bold mb-10" style="color: var(--text-white);">Layanan Saya</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8" id="services-grid">
          <!-- Service 1: Custom Mobile App Development -->
          <div
            class="p-6 rounded-xl shadow-lg transform hover:scale-105 transition duration-300 service-card" style="background-color: var(--bg-card-secondary);"
          >
            <p class="text-accent text-5xl mb-4 flex justify-center">
              <i data-lucide="smartphone-charging"></i>
            </p>
            <h3 class="text-2xl font-bold mb-2" style="color: var(--text-white);">
              Pengembangan Aplikasi Mobile Kustom
            </h3>
            <p class="mb-4" style="color: var(--text-secondary);">
              Membangun aplikasi Android & iOS yang performa tinggi dan intuitif
              menggunakan Flutter & Kotlin.
            </p>
            <ul class="text-sm text-left list-disc list-inside" style="color: var(--text-secondary);">
              <li>UI/UX Responsif</li>
              <li>Integrasi API</li>
              <li>Offline Capabilities</li>
            </ul>
          </div>
          <!-- Service 2: Web Application & ERP Development -->
          <div
            class="p-6 rounded-xl shadow-lg transform hover:scale-105 transition duration-300 service-card" style="background-color: var(--bg-card-secondary);"
          >
            <p class="text-accent text-5xl mb-4 flex justify-center">
              <i data-lucide="layout-dashboard"></i>
            </p>
            <h3 class="text-2xl font-bold mb-2" style="color: var(--text-white);">
              Pengembangan Web & Sistem ERP
            </h3>
            <p class="mb-4" style="color: var(--text-secondary);">
              Menciptakan aplikasi web yang skalabel dan sistem ERP khusus untuk
              efisiensi bisnis Anda.
            </p>
            <ul class="text-sm text-left list-disc list-inside" style="color: var(--text-secondary);">
              <li>Laravel Backend</li>
              <li>Panel Admin Kustom</li>
              <li>Manajemen Database</li>
            </ul>
          </div>
          <!-- Service 3: AI Integration & Chatbot Solutions -->
          <div
            class="p-6 rounded-xl shadow-lg transform hover:scale-105 transition duration-300 service-card" style="background-color: var(--bg-card-secondary);"
          >
            <p class="text-accent text-5xl mb-4 flex justify-center">
              <i data-lucide="bot"></i>
            </p>
            <h3 class="text-2xl font-bold mb-2" style="color: var(--text-white);">
              Integrasi AI & Solusi Chatbot
            </h3>
            <p class="mb-4" style="color: var(--text-secondary);">
              Mengotomatisasi proses bisnis dengan integrasi AI dan chatbot
              interaktif (mis. WhatsApp AI).
            </p>
            <ul class="text-sm text-left list-disc list-inside" style="color: var(--text-secondary);">
              <li>AI Data Processing</li>
              <li>Chatbot Otomatisasi</li>
              <li>Integrasi API AI</li>
            </ul>
          </div>
          <!-- Service 4: Real-time System Development -->
          <div
            class="p-6 rounded-xl shadow-lg transform hover:scale-105 transition duration-300 service-card" style="background-color: var(--bg-card-secondary);"
          >
            <p class="text-accent text-5xl mb-4 flex justify-center">
              <i data-lucide="server"></i>
            </p>
            <h3 class="text-2xl font-bold mb-2" style="color: var(--text-white);">
              Pengembangan Sistem Real-time
            </h3>
            <p class="mb-4" style="color: var(--text-secondary);">
              Membangun aplikasi dengan kemampuan pemrosesan data dan interaksi
              secara real-time.
            </p>
            <ul class="text-sm text-left list-disc list-inside" style="color: var(--text-secondary);">
              <li>WebSockets</li>
              <li>Streaming Data</li>
              <li>Push Notifications</li>
            </ul>
          </div>
        </div>
        <p class="text-xl mt-12" style="color: var(--text-secondary);">
          Punya kebutuhan spesifik?
          <span class="text-accent font-semibold"
            >Saya siap membantu mewujudkannya!</span
          >
          <br />Hubungi saya untuk diskusi lebih lanjut tentang proyek Anda.
        </p>
      </div>
    </section>

    <!-- Live Demos Section (New) -->
    <section id="live-demos" class="py-20 fade-in-on-scroll">
      <div class="container text-center">
        <h2 class="text-4xl font-bold mb-10" style="color: var(--text-white);">Live Demos</h2>
        <p class="text-lg mb-12 max-w-2xl mx-auto" style="color: var(--text-secondary);">
          Berikut adalah beberapa demo interaktif kecil yang menunjukkan keahlian teknis saya secara langsung.
        </p>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 max-w-4xl mx-auto">
          <!-- Demo 1: Real-time Visitor Counter -->
          <div class="bg-card p-6 rounded-xl shadow-lg">
            <div class="flex items-center justify-center gap-4 mb-4">
              <p class="text-accent text-4xl"><i data-lucide="users"></i></p>
              <h3 class="text-2xl font-bold" style="color: var(--text-white);">Pengunjung Real-time (Simulasi)</h3>
            </div>
            <p class="mb-6" style="color: var(--text-secondary);">
              Demo ini menyimulasikan pembaruan data secara real-time, seperti yang digunakan dalam dashboard analitik atau sistem notifikasi. Angka di bawah ini diperbarui secara acak setiap beberapa detik.
            </p>
            <div class="p-4 rounded-lg" style="background-color: var(--bg-primary);">
              <p class="text-sm mb-2" style="color: var(--text-secondary);">Pengunjung Online Saat Ini:</p>
              <p id="visitor-count" class="text-5xl font-bold text-accent transition-transform duration-300">
                ...
              </p>
            </div>
            <!-- Tombol dan Kontainer untuk "Behind the Code" -->
            <button class="btn-code-toggle" data-code-source="visitor-counter-code">
              Lihat Kode
            </button>
            <div class="code-viewer"></div>
            <!-- Kode Sumber (disembunyikan) -->
            <div id="visitor-counter-code" class="hidden">
              <pre><code class="language-javascript">
const visitorCountElement = document.getElementById('visitor-count');
let currentVisitors = Math.floor(Math.random() * 151) + 150;
visitorCountElement.textContent = currentVisitors;

setInterval(() => {
  const fluctuation = Math.floor(Math.random() * 5) - 2;
  currentVisitors = Math.max(100, currentVisitors + fluctuation);
  visitorCountElement.classList.add('pop-in');
  visitorCountElement.textContent = currentVisitors;
  setTimeout(() => visitorCountElement.classList.remove('pop-in'), 300);
}, Math.random() * 2000 + 2000);
              </code></pre>
            </div>
          </div>
    
          <!-- Demo 2: Placeholder for another demo -->
          <!-- Demo 2: Color Palette Generator -->
          <div class="bg-card p-6 rounded-xl shadow-lg">
            <div class="flex items-center justify-center gap-4 mb-4">
              <p class="text-accent text-4xl"><i data-lucide="palette"></i></p>
              <h3 class="text-2xl font-bold" style="color: var(--text-white);">Color Palette Generator</h3>
            </div>
            <p class="mb-6" style="color: var(--text-secondary);">
              Klik tombol di bawah untuk menghasilkan palet warna acak. Klik pada salah satu warna untuk menyalin kode hex-nya.
            </p>
            <div id="palette-container" class="flex justify-center gap-2 mb-6 h-24">
              <!-- Color swatches will be generated here by JS -->
            </div>
            <button id="generate-palette-btn" class="btn-secondary w-full">
              Buat Palet Baru
            </button>
            <p id="copy-feedback" class="text-green-400 text-sm mt-3 h-4 text-center transition-opacity duration-300"></p>
          </div>
          <!-- Kode Sumber untuk Palette Generator (disembunyikan) -->
          <div id="palette-generator-code" class="hidden">
            <pre><code class="language-javascript">
const paletteContainer = document.getElementById('palette-container');
const generateBtn = document.getElementById('generate-palette-btn');
const copyFeedback = document.getElementById('copy-feedback');

function generatePalette() {
  paletteContainer.innerHTML = '';
  for (let i = 0; i < 5; i++) {
    const color = '#' + Math.floor(Math.random()*16777215).toString(16).padStart(6, '0');
    const swatch = document.createElement('div');
    swatch.className = 'color-swatch';
    swatch.style.backgroundColor = color;
    swatch.addEventListener('click', () => {
      navigator.clipboard.writeText(color);
      copyFeedback.textContent = `Warna ${color.toUpperCase()} disalin!`;
    });
    paletteContainer.appendChild(swatch);
  }
}
generateBtn.addEventListener('click', generatePalette);
generatePalette(); // Initial generation
            </code></pre>
          </div>

        </div>
      </div>
    </section>

    <!-- Workflow Section -->
    <section id="workflow" class="py-20 fade-in-on-scroll">
      <div class="container text-center">
        <h2 class="text-4xl font-bold mb-16" style="color: var(--text-white);">
          Bagaimana Saya Bekerja
        </h2>
        <div
          class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-x-8 gap-y-12" id="workflowSteps"
        >
          <!-- Step 1: Konsultasi & Perencanaan -->
          <div class="flex flex-col items-center workflow-step">
            <div class="text-white rounded-full w-16 h-16 flex items-center justify-center text-2xl font-bold mb-4 shadow-lg"
              style="background-color: var(--color-accent);">
              1
            </div>
            <h3 class="text-xl font-semibold mb-2" style="color: var(--text-white);">
              Konsultasi & Perencanaan
            </h3>
            <p class="text-sm" style="color: var(--text-secondary);">
              Memahami kebutuhan Anda, menentukan lingkup proyek, dan menyusun
              rencana kerja yang detail.
            </p>
          </div>
          <!-- Step 2: Desain & Prototyping -->
          <div class="flex flex-col items-center workflow-step">
            <div class="text-white rounded-full w-16 h-16 flex items-center justify-center text-2xl font-bold mb-4 shadow-lg"
              style="background-color: var(--color-accent);">
              2
            </div>
            <h3 class="text-xl font-semibold mb-2" style="color: var(--text-white);">
              Desain & Prototyping
            </h3>
            <p class="text-sm" style="color: var(--text-secondary);">
              Merancang antarmuka pengguna (UI/UX) yang intuitif dan membuat
              prototipe untuk validasi awal.
            </p>
          </div>
          <!-- Step 3: Pengembangan & Pengujian -->
          <div class="flex flex-col items-center workflow-step">
            <div class="text-white rounded-full w-16 h-16 flex items-center justify-center text-2xl font-bold mb-4 shadow-lg"
              style="background-color: var(--color-accent);">
              3
            </div>
            <h3 class="text-xl font-semibold mb-2" style="color: var(--text-white);">
              Pengembangan & Pengujian
            </h3>
            <p class="text-sm" style="color: var(--text-secondary);">
              Implementasi kode, integrasi fitur, dan pengujian menyeluruh
              untuk memastikan kualitas dan fungsionalitas.
            </p>
          </div>
          <!-- Step 4: Deployment & Dukungan -->
          <div class="flex flex-col items-center workflow-step">
            <div class="text-white rounded-full w-16 h-16 flex items-center justify-center text-2xl font-bold mb-4 shadow-lg"
              style="background-color: var(--color-accent);">
              4
            </div>
            <h3 class="text-xl font-semibold mb-2" style="color: var(--text-white);">
              Deployment & Dukungan
            </h3>
            <p class="text-sm" style="color: var(--text-secondary);">
              Peluncuran aplikasi ke server atau app store, serta menyediakan
              dukungan pasca-peluncuran.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Portfolio Section -->
    <section
      id="portfolio"
      class="py-20 bg-card shadow-lg rounded-xl my-8 md:mx-auto container fade-in-on-scroll"
    >
      <div class="text-center">
        <h2 class="text-4xl font-bold mb-10" style="color: var(--text-white);">Portofolio Pilihan</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
          <!-- Kartu Proyek 1: PPDB SMAKPA Padang -->
          <div
            class="p-6 rounded-xl shadow-lg transform hover:scale-105 transition duration-300 cursor-pointer" style="background-color: var(--bg-card-secondary);"
            onclick="openModal('ppdb')"
          >
            <img
              id="img-ppdb-home"
              src="./assets/img/project/ppdb-smakpa/ppdb-smakpa-public.png"
              alt="Screenshot Beranda PPDB SMAKPA Padang"
              class="rounded-lg mb-4 w-full h-48 object-cover"
              onerror="this.onerror=null;this.src='https://placehold.co/400x200/4a5568/e2e8f0?text=Image+Error';"
            />
            <h3 class="text-2xl font-bold mb-2" style="color: var(--text-white);">
              PPDB SMAKPA Padang
            </h3>
            <p class="text-lg mb-4" style="color: var(--text-secondary);">
              Website Pendaftaran Peserta Didik Baru Online
            </p>
            <span
              class="inline-block text-white text-xs font-semibold px-3 py-1 rounded-full" style="background-color: var(--color-accent);"
              >Full-Stack Development</span
            >
          </div>

          <!-- Tambahkan lebih banyak kartu proyek di sini mengikuti struktur yang sama -->
          <div
            class="p-6 rounded-xl shadow-lg transform hover:scale-105 transition duration-300" style="background-color: var(--bg-card-secondary);"
          >
            <img
              src="https://placehold.co/400x200/4a5568/e2e8f0?text=Proyek+Selanjutnya"
              alt="Placeholder Proyek Selanjutnya"
              class="rounded-lg mb-4 w-full h-48 object-cover"
            />
            <h3 class="text-2xl font-bold mb-2" style="color: var(--text-white);">
              Proyek Selanjutnya
            </h3>
            <p class="text-lg mb-4" style="color: var(--text-secondary);">
              Deskripsi singkat proyek Anda.
            </p>
            <span
              class="inline-block text-xs font-semibold px-3 py-1 rounded-full" style="background-color: var(--bg-card-secondary); color: var(--text-primary);"
              >Kategori Proyek</span
            >
          </div>
          <div
            class="p-6 rounded-xl shadow-lg transform hover:scale-105 transition duration-300" style="background-color: var(--bg-card-secondary);"
          >
            <img
              src="https://placehold.co/400x200/4a5568/e2e8f0?text=Proyek+Selanjutnya"
              alt="Placeholder Proyek Selanjutnya"
              class="rounded-lg mb-4 w-full h-48 object-cover"
            />
            <h3 class="text-2xl font-bold mb-2" style="color: var(--text-white);">
              Proyek Selanjutnya
            </h3>
            <p class="text-lg mb-4" style="color: var(--text-secondary);">
              Deskripsi singkat proyek Anda.
            </p>
            <span
              class="inline-block text-xs font-semibold px-3 py-1 rounded-full" style="background-color: var(--bg-card-secondary); color: var(--text-primary);"
              >Kategori Proyek</span
            >
          </div>
        </div>
        <p class="text-xl mt-12" style="color: var(--text-secondary);">
          <span class="text-accent font-semibold"
            >Ingin melihat lebih banyak?</span
          >
          Saya punya lebih banyak proyek menakjubkan yang siap untuk dibagikan.
          <br />Silakan lengkapi detail proyek lainnya agar saya bisa
          menambahkannya di sini!
        </p>
      </div>
    </section>

    <!-- Testimonials Section (New) -->
    <section id="testimonials" class="py-20 fade-in-on-scroll">
      <div class="container text-center">
        <h2 class="text-4xl font-bold mb-10" style="color: var(--text-white);">Apa Kata Klien Saya</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
          <!-- Testimonial 1 -->
          <div class="bg-card p-6 rounded-xl shadow-lg">
            <p class="italic mb-4" style="color: var(--text-secondary);">
              "Sistem PPDB online yang dibangun oleh Ade Syofyan benar-benar mengubah cara kami bekerja. Proses yang tadinya manual dan rumit kini menjadi efisien dan transparan. Kami berhasil mengelola ribuan pendaftar tanpa kendala. Sebuah solusi yang sangat kami butuhkan."
            </p>
            <p class="font-semibold" style="color: var(--text-white);">
              - Drs. Nasir, Kepala Sekolah SMAKPA Padang
            </p>
            <p class="text-sm" style="color: var(--text-secondary);">Padang</p>
          </div>
          <!-- Testimonial 2 -->
          <div class="bg-card p-6 rounded-xl shadow-lg">
            <p class="italic mb-4" style="color: var(--text-secondary);">
              "Implementasi AI Akuntan dari Ade adalah sebuah *game-changer* bagi tim keuangan kami. Waktu untuk input jurnal manual berkurang hingga 80%, memungkinkan kami fokus pada analisis strategis. Akurasi data pun meningkat drastis."
            </p>
            <p class="font-semibold" style="color: var(--text-white);">
              - Rina Wijayanti, Finance Manager, PT. Logistik Cemerlang
            </p>
            <p class="text-sm" style="color: var(--text-secondary);">Jakarta</p>
          </div>
          <!-- Add more testimonials as needed -->
          <div class="bg-card p-6 rounded-xl shadow-lg">
            <p class="italic mb-4" style="color: var(--text-secondary);">
              "Kami mempercayakan pengembangan aplikasi mobile PropertiKita kepada Ade, dan hasilnya luar biasa. Aplikasi Flutter yang ia bangun tidak hanya cepat dan stabil di Android & iOS, tetapi juga memiliki desain yang sangat intuitif. Pengguna kami menyukainya!"
            </p>
            <p class="font-semibold" style="color: var(--text-white);">
              - David Lee, Founder, PropertiKita
            </p>
            <p class="text-sm" style="color: var(--text-secondary);">Surabaya</p>
          </div>
          <div class="bg-card p-6 rounded-xl shadow-lg">
            <p class="italic mb-4" style="color: var(--text-secondary);">
              "Ade memiliki pemahaman mendalam tentang proses bisnis. Sistem ERP kustom yang ia kembangkan untuk dealer kami berhasil mengintegrasikan data penjualan, servis, dan inventaris dalam satu platform. Efisiensi operasional kami meningkat secara signifikan."
            </p>
            <p class="font-semibold" style="color: var(--text-white);">
              - Ir. Hendra Gunawan, Direktur Operasional, Sentra Otomotif Nusantara
            </p>
            <p class="text-sm" style="color: var(--text-secondary);">Bandung</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="py-20 fade-in-on-scroll">
      <div class="container text-center">
        <h2 class="text-4xl font-bold mb-10" style="color: var(--text-white);">Hubungi Saya</h2>
        <p class="text-lg mb-8 max-w-2xl mx-auto" style="color: var(--text-secondary);">
          Tertarik untuk berkolaborasi atau memiliki pertanyaan? Jangan ragu
          untuk menghubungi saya melalui kontak di bawah ini.
        </p>
        <div
          class="flex flex-col md:flex-row justify-center items-center gap-8"
        >
          <div
            class="bg-card p-6 rounded-xl shadow-lg text-center w-full md:w-1/4"
          >
            <!-- Ikon Email -->
            <p class="text-accent text-5xl mb-4 flex justify-center">
              <i data-lucide="mail"></i>
            </p>
            <h3 class="text-xl font-semibold mb-2" style="color: var(--text-white);">Email</h3>
            <a
              href="mailto:ade.syofyan@gmail.com"
              class="hover:text-white transition duration-300" style="color: var(--text-secondary);"
              >ade.syofyan@gmail.com</a
            >
          </div>
          <div
            class="bg-card p-6 rounded-xl shadow-lg text-center w-full md:w-1/4"
          >
            <!-- Ikon Telepon -->
            <p class="text-accent text-5xl mb-4 flex justify-center">
              <i data-lucide="phone"></i>
            </p>
            <h3 class="text-xl font-semibold mb-2" style="color: var(--text-white);">Telepon</h3>
            <a
              href="tel:+6282284955080"
              class="hover:text-white transition duration-300" style="color: var(--text-secondary);"
              >0822-8495-5080</a
            >
          </div>
          <div
            class="bg-card p-6 rounded-xl shadow-lg text-center w-full md:w-1/4"
          >
            <!-- Ikon LinkedIn -->
            <p class="text-accent text-5xl mb-4 flex justify-center">
              <i data-lucide="linkedin"></i>
            </p>
            <h3 class="text-xl font-semibold mb-2" style="color: var(--text-white);">LinkedIn</h3>
            <a
              href="https://www.linkedin.com/in/ade-syofyan/"
              target="_blank"
              class="hover:text-white transition duration-300" style="color: var(--text-secondary);"
              >Profil LinkedIn</a
            >
          </div>
          <!-- Kartu Chatbot -->
          <div
            class="bg-card p-6 rounded-xl shadow-lg text-center w-full md:w-1/4 cursor-pointer transform hover:scale-105 transition duration-300"
            onclick="openChatbotModal()"
          >
            <p class="text-accent text-5xl mb-4 flex justify-center">
              <i data-lucide="message-square"></i>
            </p>
            <h3 class="text-xl font-semibold mb-2" style="color: var(--text-white);">Tanya Ade </h3>
            <p style="color: var(--text-secondary);">Ajukan pertanyaan ke AI!</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer class="py-8 mt-12 text-center" style="background-color: var(--bg-nav); color: var(--text-secondary); transition: background-color 0.3s ease;">
      <div class="container">
        <p>&copy; 2025 Ade Syofyan. Hak Cipta Dilindungi Undang-Undang.</p>
      </div>
    </footer>

    <!-- Modal Detail Proyek -->
    <div id="projectModal" class="modal-overlay">
      <div class="modal-content">
        <button
          class="modal-close-btn"
          onclick="closeModal()"
          aria-label="Close Project Modal"
        >
          &times;
        </button>
        <h3 id="modalTitle" class="text-3xl font-bold mb-4" style="color: var(--text-white);"></h3>
        <p id="modalType" class="text-lg mb-2" style="color: var(--text-secondary);"></p>
        <p id="modalRole" class="text-lg mb-4" style="color: var(--text-secondary);"></p>

        <div
          id="modalImages"
          class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6"
        >
          <!-- Gambar akan disuntikkan di sini -->
        </div>

        <p class="text-lg mb-4" style="color: var(--text-secondary);">
          <span class="font-semibold text-accent">Tujuan Proyek:</span>
          <span id="modalGoal"></span>
        </p>
        <p class="text-lg mb-4" style="color: var(--text-secondary);">
          <span class="font-semibold text-accent">Proses Kerja:</span>
          <span id="modalProcess"></span>
        </p>
        <p class="text-lg mb-4" style="color: var(--text-secondary);">
          <span class="font-semibold text-accent">Hasil/Dampak:</span>
          <span id="modalImpact"></span>
        </p>
      </div>
    </div>

    <!-- Modal Chatbot -->
    <div id="chatbotModal" class="modal-overlay">
      <div class="chatbot-content">
        <button
          class="modal-close-btn"
          onclick="closeChatbotModal()"
          aria-label="Close Chatbot Modal"
        >
          &times;
        </button>
        <h3 class="text-2xl font-bold mb-4" style="color: var(--text-white);">Tanya Ade </h3>
        <div id="chatDisplay" class="chat-display">
          <div class="flex justify-start mb-2">
            <div
              class="text-white p-3 rounded-lg max-w-[80%] chat-message" style="background-color: var(--bg-card-secondary);"
            >
              Halo! Saya Ade Syofyan. Ada yang bisa saya bantu tentang keahlian
              atau pengalaman saya?
            </div>
          </div>
        </div>
        <div class="chat-input-area">
          <input
            type="text"
            id="chatInput"
            placeholder="Ketik pertanyaan Anda..."
          />
          <button onclick="sendChatMessage()">Kirim</button>
        </div>
      </div>
    </div>

    <!-- Custom Confirmation Modal -->
    <div id="customConfirmModal" class="fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-[1020] hidden p-4">
        <div class="p-6 rounded-lg shadow-xl w-full max-w-sm text-center" style="background-color: var(--bg-card);">
            <p id="customConfirmMessage" class="text-lg mb-6" style="color: var(--text-white);">Pesan konfirmasi di sini.</p>
            <div class="flex justify-center space-x-4">
                <button id="customConfirmButtonYes" class="btn-primary px-6 py-2">Ya</button>
                <button id="customConfirmButtonNo" class="btn-secondary px-6 py-2">Tidak</button>
            </div>
        </div>
    </div>

    <!-- Scroll to Top Button -->
    <button onclick="scrollToTop()" id="scrollToTopBtn" title="Gulir ke atas">
      <i data-lucide="arrow-up"></i>
    </button>

    <!-- Interactive Terminal -->
    <div id="terminal" class="hidden fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm z-[1050] p-4 md:p-8">
        <div id="terminal-window" class="w-full h-full bg-gray-900 rounded-lg shadow-2xl flex flex-col font-mono text-sm text-gray-300 border border-gray-700" style="background-color: var(--bg-primary); color: var(--text-primary); border-color: var(--border-color);">
            <div class="bg-gray-800 p-2 rounded-t-lg flex items-center gap-2 flex-shrink-0">
                <div class="flex gap-2 pl-1">
                    <button id="terminal-close" class="terminal-btn bg-red-500"><i data-lucide="x" class="btn-icon"></i></button>
                    <button id="terminal-minimize" class="terminal-btn bg-yellow-500"><i data-lucide="minus" class="btn-icon"></i></button>
                    <button id="terminal-maximize" class="terminal-btn bg-green-500"><i data-lucide="maximize-2" class="btn-icon"></i></button>
                </div>
                <span class="mx-auto text-xs text-gray-400">ade-syofyan@portfolio: ~</span>
            </div>
            <div id="terminal-output" class="flex-grow p-4 overflow-y-auto">
                <!-- Output will be printed here -->
            </div>
            <div class="p-2 flex items-center border-t border-gray-700 flex-shrink-0">
                <span class="text-green-400">guest@ade-syofyan.dev:~$</span>
                <input type="text" id="terminal-input" class="bg-transparent border-none flex-grow ml-2 focus:outline-none" autocomplete="off" style="color: var(--text-primary);">
            </div>
        </div>
    </div>

    <!-- Terminal Toggle Button -->
    <button id="terminal-toggle-btn" class="fixed bottom-5 left-5 z-[100] text-accent p-3 rounded-full shadow-lg transition-all" style="background-color: var(--bg-card);" title="Buka Mode Terminal">
        <i data-lucide="terminal-square" class="w-6 h-6"></i>
    </button>

    <!-- Achievement Toggle Button -->
    <button id="achievement-toggle-btn" class="fixed bottom-5 left-20 z-[100] text-accent p-3 rounded-full shadow-lg transition-all" style="background-color: var(--bg-card);" title="Lihat Pencapaian">
        <i data-lucide="award" class="w-6 h-6"></i>
    </button>

    <!-- Achievement Modal -->
    <div id="achievementModal" class="modal-overlay">
        <div class="modal-content">
            <button class="modal-close-btn" onclick="closeAchievementModal()" aria-label="Close Achievements Modal">&times;</button>
            <h3 class="text-3xl font-bold mb-6 text-center" style="color: var(--text-white);">Pencapaian</h3>
            <div id="achievement-grid" class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                <!-- Achievement cards will be injected here -->
            </div>
        </div>
    </div>

    <!-- Achievement Toast Notification -->
    <div id="achievement-toast" class="hidden fixed bottom-5 right-5 bg-card border-l-4 border-accent p-4 rounded-lg shadow-2xl max-w-sm z-[2000] transform translate-x-[110%] transition-transform duration-500 ease-in-out">
        <div class="flex items-center">
            <div class="text-accent mr-3 flex-shrink-0">
                <i data-lucide="award" class="w-8 h-8"></i>
            </div>
            <div>
                <p class="font-bold" style="color: var(--text-white);">Pencapaian Terbuka!</p>
                <p id="toast-achievement-name" class="text-sm" style="color: var(--text-secondary);">Nama Pencapaian</p>
            </div>
        </div>
    </div>


    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "Person",
        "name": "Ade Syofyan",
        "url": "https://ade-syofyan.github.io/",
        "image": "https://ade-syofyan.github.io/assets/img/foto_ade_new.jpeg",
        "sameAs": [
          "https://www.linkedin.com/in/ade-syofyan/",
          "mailto:ade.syofyan@gmail.com",
          "https://wa.me/6282284955080" <!-- Menambahkan WhatsApp ke sameAs -->
        ],
        "jobTitle": "Mobile & Web Developer Senior",
        "worksFor": {
          "@type": "Organization",
          "name": "Freelance / Independent Contractor"
        },
        "description": "Programmer senior dengan pengalaman lebih dari 7 tahun dalam pengembangan aplikasi web, mobile, dan ERP. Ahli dalam membangun solusi digital untuk properti, otomotif, layanan publik, serta integrasi AI untuk efisiensi bisnis. Berpengalaman membuat AI akuntan untuk input jurnal otomatis, serta chatbot WhatsApp AI untuk mendukung tim sales dan customer service. Mahir dalam stack Laravel, Flutter, Firebase, dan integrasi sistem real-time.",
        "knowsAbout": [
          "Mobile Development",
          "Web Development",
          "AI Integration",
          "ERP Systems",
          "Firebase",
          "Real-time Systems",
          "Problem Solving",
          "Cloud Services",
          "Flutter",
          "Kotlin",
          "Laravel",
          "PHP",
          "JavaScript"
        ],
        "alumniOf": {
          "@type": "EducationalOrganization",
          "name": "Nama Universitas/Institusi Anda" <!-- Ganti dengan nama universitas/institusi Anda -->
        },
        "hasOccupation": {
          "@type": "Occupation",
          "name": "Software Developer",
          "description": "Mengembangkan dan mengelola aplikasi web dan mobile, serta sistem ERP, dengan fokus pada solusi inovatif dan efisiensi bisnis."
        },
        "address": {
          "@type": "PostalAddress",
          "addressLocality": "Padang",
          "addressRegion": "Sumatera Barat",
          "addressCountry": "ID"
        },
        "contactPoint": {
          "@type": "ContactPoint",
          "telephone": "+6282284955080",
          "contactType": "customer service"
        }
      }
    </script>

    <script>
      // Gunakan IIFE untuk cakupan
      (async function () {
        // Variabel untuk menyimpan riwayat percakapan
        let conversationHistory = [];

        // Data proyek (dapat diperluas nanti)
        const projects = {
          ppdb: {
            title: "Studi Kasus: PPDB Online SMAKPA Padang",
            type: "Website Pendaftaran Peserta Didik Baru Online",
            goal: "SMAKPA Padang menghadapi tantangan dalam proses pendaftaran yang masih manual, memakan waktu, rentan kesalahan data, dan memiliki jangkauan terbatas. Mereka membutuhkan sebuah sistem digital untuk modernisasi proses ini.",
            role: "Full-Stack Developer",
            process:
              "Sebagai Full-Stack Developer, saya merancang dan membangun platform PPDB online dari awal. **Backend** dibangun menggunakan **Laravel** untuk memastikan keamanan data dan skalabilitas. **Frontend** dibuat responsif agar mudah diakses dari desktop maupun mobile. Prosesnya meliputi: 1) Analisis kebutuhan dengan pihak sekolah, 2) Desain alur pendaftaran yang intuitif, 3) Pengembangan fitur utama seperti formulir dinamis, upload dokumen, dan dashboard admin, 4) Pengujian intensif sebelum peluncuran.",
            impact:
              "Sistem ini berhasil **mengotomatisasi 95% proses pendaftaran**, mengurangi beban kerja tim administrasi secara signifikan. Platform ini sukses mengelola **lebih dari 1.000 pendaftar** pada gelombang pertama dengan lancar. Jangkauan pendaftaran meluas, memungkinkan calon siswa dari luar kota untuk mendaftar dengan mudah.",
            images: [
              {
                id: "./assets/img/project/ppdb-smakpa/ppdb-smakpa-public.png",
                alt: "Screenshot Beranda PPDB SMAKPA Padang",
              },
              {
                id: "./assets/img/project/ppdb-smakpa/ppdb-smakpa-admin.png",
                alt: "Screenshot Dashboard Admin PPDB SMAKPA Padang",
              },
              {
                id: "./assets/img/project/ppdb-smakpa/ppdb-smakpa-syarat.png",
                alt: "Screenshot Halaman Persyaratan PPDB SMAKPA Padang",
              },
            ],
          },
          // Tambahkan lebih banyak proyek di sini
        };

        // Ambil dan atur sumber gambar saat DOM siap
        document.addEventListener("DOMContentLoaded", async () => {
          // --- Theme Management ---
          const themeToggleBtn = document.getElementById('theme-toggle-btn');
          const themeDropdown = document.getElementById('theme-dropdown');
          const themeOptions = document.querySelectorAll('.theme-option');
          const mobileThemeContainer = document.getElementById('mobile-theme-switcher');

          const applyTheme = (theme) => {
            if (theme === 'system') {
              document.documentElement.removeAttribute('data-theme');
              const systemTheme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
              updateIcons(systemTheme, true);
            } else {
              document.documentElement.setAttribute('data-theme', theme);
              updateIcons(theme, false);
            }
            localStorage.setItem('theme', theme);
            updateActiveState(theme);
          };

          const updateIcons = (theme, isSystem) => {
            document.getElementById('theme-icon-light').classList.toggle('hidden', theme !== 'light' || isSystem);
            document.getElementById('theme-icon-dark').classList.toggle('hidden', theme !== 'dark' || isSystem);
            document.getElementById('theme-icon-system').classList.toggle('hidden', !isSystem);
          };

          const updateActiveState = (theme) => {
            themeOptions.forEach(opt => {
              opt.classList.toggle('active', opt.dataset.themeValue === theme);
            });
            // Update mobile switcher
            const mobileButtons = mobileThemeContainer.querySelectorAll('button');
            mobileButtons.forEach(btn => {
              btn.classList.toggle('bg-accent', btn.dataset.themeValue === theme);
              btn.classList.toggle('text-white', btn.dataset.themeValue === theme);
            });
          };

          themeToggleBtn.addEventListener('click', () => {
            themeDropdown.classList.toggle('open');
          });

          document.addEventListener('click', (e) => {
            if (!themeToggleBtn.contains(e.target) && !themeDropdown.contains(e.target)) {
              themeDropdown.classList.remove('open');
            }
          });

          themeOptions.forEach(option => {
            option.addEventListener('click', () => {
              const theme = option.dataset.themeValue;
              applyTheme(theme);
              themeDropdown.classList.remove('open');
            });
          });

          window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {
            if (localStorage.getItem('theme') === 'system') {
              applyTheme('system');
            }
          });

          const savedTheme = localStorage.getItem('theme') || 'system';
          applyTheme(savedTheme);

          // Inisialisasi ikon Lucide
          // --- Achievement System ---
          const achievements = {
              'code_inspector': { name: 'Inspektur Kode', unlocked: false, description: 'Melihat "di balik layar" salah satu demo interaktif.', icon: 'code' },
              'explorer': { name: 'Penjelajah Sejati', unlocked: false, description: 'Menjelajahi hingga bagian akhir halaman.', icon: 'compass' },
              'ai_challenger': { name: 'Penantang AI', unlocked: false, description: 'Mengajukan pertanyaan pertama ke chatbot AI.', icon: 'bot' },
              'terminal_velocity': { name: 'Kecepatan Terminal', unlocked: false, description: 'Menggunakan mode terminal interaktif.', icon: 'terminal' },
              'social_butterfly': { name: 'Kupu-kupu Sosial', unlocked: false, description: 'Membuka salah satu profil media sosial.', icon: 'share-2' },
              'palette_picasso': { name: 'Palette Picasso', unlocked: false, description: 'Menghasilkan 5 palet warna.', icon: 'palette' }
          };
          let paletteGenerationCount = parseInt(localStorage.getItem('paletteCount') || '0');

          function showToast(achievementName) {
              const toast = document.getElementById('achievement-toast');
              const nameElement = document.getElementById('toast-achievement-name');
              if (!toast || !nameElement) return;

              nameElement.textContent = achievementName;
              toast.classList.remove('hidden');
              toast.classList.add('show');

              setTimeout(() => {
                  toast.classList.remove('show');
                  // Sembunyikan setelah transisi selesai
                  setTimeout(() => toast.classList.add('hidden'), 500);
              }, 4000); // Toast terlihat selama 4 detik
          }

          window.unlockAchievement = function(id) {
              if (achievements[id] && !achievements[id].unlocked) {
                  achievements[id].unlocked = true;
                  showToast(achievements[id].name);
                  
                  const saved = JSON.parse(localStorage.getItem('portfolioAchievements') || '[]');
                  if (!saved.includes(id)) {
                      saved.push(id);
                      localStorage.setItem('portfolioAchievements', JSON.stringify(saved));
                  }
              }
          }

          function loadAchievements() {
              const saved = localStorage.getItem('portfolioAchievements');
              if (saved) {
                  const unlockedIds = JSON.parse(saved);
                  unlockedIds.forEach(id => {
                      if (achievements[id]) {
                          achievements[id].unlocked = true;
                      }
                  });
              }
          }
          
          loadAchievements();

          // --- Achievement Modal Logic ---
          const achievementModal = document.getElementById('achievementModal');
          const achievementGrid = document.getElementById('achievement-grid');
          const achievementToggleBtn = document.getElementById('achievement-toggle-btn');

          window.openAchievementModal = function() {
              populateAchievements();
              achievementModal.classList.add('open');
          }

          window.closeAchievementModal = function() {
              achievementModal.classList.remove('open');
          }

          function populateAchievements() {
              if (!achievementGrid) return;
              achievementGrid.innerHTML = ''; // Clear previous content

              const unlockedIds = JSON.parse(localStorage.getItem('portfolioAchievements') || '[]');

              for (const id in achievements) {
                  const ach = achievements[id];
                  const isUnlocked = unlockedIds.includes(id);

                  const card = document.createElement('div');
                  card.className = 'achievement-card';
                  if (isUnlocked) card.classList.add('unlocked');

                  card.innerHTML = `
                      <div class="ach-icon"><i data-lucide="${ach.icon || 'award'}" class="w-8 h-8"></i></div>
                      <div>
                          <p class="ach-name">${ach.name}</p>
                          <p class="ach-desc">${isUnlocked ? ach.description : '???'}</p>
                      </div>`;
                  achievementGrid.appendChild(card);
              }
              lucide.createIcons();
          }
          if (achievementToggleBtn) achievementToggleBtn.addEventListener('click', openAchievementModal);
          if (achievementModal) achievementModal.addEventListener('click', (e) => { if (e.target === achievementModal) closeAchievementModal(); });
          // --- End of Achievement System ---

          // --- Create Mobile Theme Switcher ---
          if (mobileThemeContainer) {
            const mobileThemes = [
              { value: 'light', icon: 'sun' },
              { value: 'dark', icon: 'moon' },
              { value: 'system', icon: 'laptop' }
            ];
            mobileThemes.forEach(theme => {
              const btn = document.createElement('button');
              btn.dataset.themeValue = theme.value;
              btn.className = 'p-2 rounded-full transition-colors';
              btn.setAttribute('aria-label', `Switch to ${theme.value} theme`);
              btn.innerHTML = `<i data-lucide="${theme.icon}" class="w-5 h-5"></i>`;
              btn.addEventListener('click', () => {
                applyTheme(theme.value);
              });
              mobileThemeContainer.appendChild(btn);
            });
            updateActiveState(savedTheme);
          }




          // Pindahkan ke sini agar tombol terminal juga diinisialisasi
          lucide.createIcons();
          // Inisialisasi mobile menu toggle button display
          
          // --- Animasi untuk Section saat di-scroll (Workflow dan lainnya) ---
          const workflowSteps = document.querySelectorAll('.workflow-step');
          const fadeInSections = document.querySelectorAll('.fade-in-on-scroll');
          if (workflowSteps.length > 0) {
            const observerOptions = {
              root: null, // relatif terhadap viewport
              rootMargin: '0px',
              threshold: 0.2 // picu saat 20% elemen terlihat
            };

            const observerCallback = (entries, observer) => {
              entries.forEach(entry => {
                if (entry.isIntersecting) {
                  entry.target.classList.add('animate');
                  observer.unobserve(entry.target); // Hentikan observasi setelah animasi dipicu
                }
              });
            };

            const workflowObserver = new IntersectionObserver(observerCallback, observerOptions);
            workflowSteps.forEach(step => {
              workflowObserver.observe(step);
            });
          }

          if (fadeInSections.length > 0) {
            const sectionObserverOptions = {
              root: null,
              rootMargin: '0px',
              threshold: 0.15 // Picu sedikit lebih awal untuk section yang lebih besar
            };
            const sectionObserverCallback = (entries, observer) => {
              entries.forEach(entry => {
                if (entry.isIntersecting) {
                  entry.target.classList.add('animate');
                  observer.unobserve(entry.target);
                }
              });
            };
            const sectionObserver = new IntersectionObserver(sectionObserverCallback, sectionObserverOptions);
            fadeInSections.forEach(section => {
              sectionObserver.observe(section);
            });
          }
          // mobileNavToggle display is now controlled by CSS media queries

          // --- Animasi Staggered untuk Kartu Keahlian ---
          const skillsGrid = document.getElementById('skills-grid');
          if (skillsGrid) {
            const skillCards = skillsGrid.querySelectorAll('.skill-card');
            const skillObserverOptions = {
              root: null,
              rootMargin: '0px',
              threshold: 0.1 // Picu saat 10% dari grid terlihat
            };

            const skillObserverCallback = (entries, observer) => {
              entries.forEach(entry => {
                if (entry.isIntersecting) {
                  skillCards.forEach((card, index) => {
                    // Terapkan delay untuk efek staggered
                    card.style.transitionDelay = `${index * 100}ms`;
                    card.classList.add('animate');
                  });
                  observer.unobserve(entry.target); // Hentikan observasi setelah animasi dipicu
                }
              });
            };

            const skillObserver = new IntersectionObserver(skillObserverCallback, skillObserverOptions);
            skillObserver.observe(skillsGrid);
          }

          // --- Animasi Staggered untuk Kartu Layanan ---
          const servicesGrid = document.getElementById('services-grid');
          if (servicesGrid) {
            const serviceCards = servicesGrid.querySelectorAll('.service-card');
            const serviceObserverOptions = {
              root: null,
              rootMargin: '0px',
              threshold: 0.1 // Picu saat 10% dari grid terlihat
            };

            const serviceObserverCallback = (entries, observer) => {
              entries.forEach(entry => {
                if (entry.isIntersecting) {
                  serviceCards.forEach((card, index) => {
                    // Terapkan delay untuk efek staggered
                    card.style.transitionDelay = `${index * 100}ms`;
                    card.classList.add('animate');
                  });
                  observer.unobserve(entry.target); // Hentikan observasi setelah animasi dipicu
                }
              });
            };

            const serviceObserver = new IntersectionObserver(serviceObserverCallback, serviceObserverOptions);
            serviceObserver.observe(servicesGrid);
          }

          // --- Live Demo: Real-time Visitor Counter ---
          const visitorCountElement = document.getElementById('visitor-count');
          if (visitorCountElement) {
              let currentVisitors = Math.floor(Math.random() * (300 - 150 + 1)) + 150; // Start with a random number between 150 and 300
              visitorCountElement.textContent = currentVisitors;

              function updateVisitorCount() {
                  // Fluctuate the number by a small random amount
                  const fluctuation = Math.floor(Math.random() * 5) - 2; // -2, -1, 0, 1, 2
                  currentVisitors += fluctuation;

                  // Ensure the number stays within a reasonable range
                  if (currentVisitors < 100) currentVisitors = 100;
                  if (currentVisitors > 350) currentVisitors = 350;

                  // Apply animation
                  visitorCountElement.classList.add('pop-in');
                  visitorCountElement.textContent = currentVisitors;

                  // Remove animation class after it finishes
                  setTimeout(() => {
                      visitorCountElement.classList.remove('pop-in');
                  }, 300); // Duration of the animation

                  // Set next update
                  const nextUpdateDelay = Math.random() * (4000 - 2000) + 2000; // Update every 2-4 seconds
                  setTimeout(updateVisitorCount, nextUpdateDelay);
              }
              setTimeout(updateVisitorCount, 2500);
          }

          // --- Live Demo: Color Palette Generator ---
          const paletteContainer = document.getElementById('palette-container');
          const generateBtn = document.getElementById('generate-palette-btn');
          const copyFeedback = document.getElementById('copy-feedback');

          function generateRandomColor() {
              // Menghasilkan warna acak dalam format hex
              return '#' + Math.floor(Math.random()*16777215).toString(16).padStart(6, '0');
          }

          function generatePalette() {
              if (!paletteContainer) return;
              paletteContainer.innerHTML = ''; // Kosongkan palet sebelumnya
              for (let i = 0; i < 5; i++) {
                  const color = generateRandomColor();
                  const swatch = document.createElement('div');
                  swatch.className = 'color-swatch';
                  swatch.style.backgroundColor = color;
                  
                  const hexCodeSpan = document.createElement('span');
                  hexCodeSpan.className = 'hex-code';
                  hexCodeSpan.textContent = color.toUpperCase();
                  swatch.appendChild(hexCodeSpan);

                  // Tambahkan event listener untuk menyalin warna saat diklik
                  swatch.addEventListener('click', () => {
                      navigator.clipboard.writeText(color).then(() => {
                          copyFeedback.textContent = `Warna ${color.toUpperCase()} disalin!`;
                          setTimeout(() => {
                              copyFeedback.textContent = '';
                          }, 2000); // Hapus pesan setelah 2 detik
                      });
                  });
                  paletteContainer.appendChild(swatch);
              }
          }

          if (generateBtn) generateBtn.addEventListener('click', generatePalette);
          // Modifikasi untuk achievement
          if (generateBtn) {
              generateBtn.addEventListener('click', () => {
                  paletteGenerationCount++;
                  localStorage.setItem('paletteCount', paletteGenerationCount);
                  if (paletteGenerationCount >= 5) unlockAchievement('palette_picasso');
              });
          }
          // Hasilkan palet awal saat halaman dimuat
          generatePalette();

          // --- "Behind the Code" Logic ---
          const codeToggleButtons = document.querySelectorAll('.btn-code-toggle');
          codeToggleButtons.forEach(button => {
            button.addEventListener('click', () => {
              const sourceId = button.dataset.codeSource;
              const sourceElement = document.getElementById(sourceId);
              const viewerElement = button.nextElementSibling;

              if (sourceElement && viewerElement) {
                const isOpen = viewerElement.classList.toggle('open');

                if (isOpen) {
                  // Jika belum ada isinya, isi dengan kode dan highlight
                  if (viewerElement.innerHTML.trim() === '') {
                    viewerElement.innerHTML = sourceElement.innerHTML;
                    Prism.highlightAllUnder(viewerElement);
                  }
                  button.textContent = 'Sembunyikan Kode';
                  unlockAchievement('code_inspector'); // Unlock achievement
                } else {
                  button.textContent = 'Lihat Kode';
                }
              }
            });
          });
          // Pindahkan tombol "Lihat Kode" untuk palette generator ke dalam card-nya
          const paletteCard = document.getElementById('palette-container').closest('.bg-card');
          const paletteCodeBtn = document.querySelector('[data-code-source="palette-generator-code"]');
          if (paletteCard && paletteCodeBtn) paletteCard.appendChild(paletteCodeBtn);

          // --- Interactive Terminal Logic ---
          const terminal = document.getElementById('terminal');
          const terminalWindow = document.getElementById('terminal-window');
          const terminalOutput = document.getElementById('terminal-output');
          const terminalInput = document.getElementById('terminal-input');
          const terminalToggleBtn = document.getElementById('terminal-toggle-btn');

          // macOS-like controls
          const terminalCloseBtn = document.getElementById('terminal-close');
          const terminalMinimizeBtn = document.getElementById('terminal-minimize');
          const terminalMaximizeBtn = document.getElementById('terminal-maximize');

          const printToTerminal = (text, isCommand = false) => {
              const line = document.createElement('div');
              line.className = 'terminal-line';
              if (isCommand) {
                  line.innerHTML = `<span class="text-green-400">guest@ade-syofyan.dev:~$</span> <span class="text-white">${text}</span>`;
              } else {
                  line.innerHTML = text;
              }
              terminalOutput.appendChild(line);
              terminalOutput.scrollTop = terminalOutput.scrollHeight;
          };

          const printWelcomeMessage = () => {
              printToTerminal('Selamat datang di Terminal Portofolio Ade Syofyan!');
              printToTerminal('Ketik `help` untuk melihat daftar perintah yang tersedia.');
              printToTerminal('');
          };

          const resetTerminal = () => {
              terminalOutput.innerHTML = '';
              printWelcomeMessage();
          };

          const commands = {
              'help': 'Perintah yang tersedia: <br> `help`   - Menampilkan bantuan ini <br> `about`  - Menampilkan info tentang saya <br> `skills` - Menampilkan daftar keahlian <br> `portfolio` - Menampilkan daftar proyek <br> `contact` - Menampilkan info kontak <br> `social` - Menampilkan link media sosial <br> `achievements` - Menampilkan daftar pencapaian <br> `open <arg>` - Membuka link (e.g., `open linkedin`, `open cv`) <br> `goto <arg>` - Navigasi ke bagian (e.g., `goto skills`) <br> `clear`  - Membersihkan layar terminal <br> `exit`   - Menutup terminal',
              'about': 'Halo, saya Ade Syofyan. Seorang Mobile & Web Developer dengan pengalaman lebih dari 7 tahun. Saya bersemangat dalam membangun solusi digital inovatif yang efisien dan berdampak positif.',
              'skills': 'Keahlian utama saya meliputi: <br> - Mobile Development (Flutter, Kotlin) <br> - Web Development (Laravel, PHP, JS) <br> - AI Integration (Chatbot, AI Akuntan) <br> - ERP Systems <br> - Firebase & Sistem Real-time <br> - Problem Solving',
              'portfolio': 'Proyek unggulan: <br> - PPDB SMAKPA Padang (Website Pendaftaran Online) <br> ...dan beberapa proyek lain yang sedang dalam pengembangan. Ketik `goto portfolio` untuk scroll ke bagian portofolio.',
              'contact': 'Anda bisa menghubungi saya melalui: <br> - Email: ade.syofyan@gmail.com <br> - Telepon: 0822-8495-5080 <br> - LinkedIn: linkedin.com/in/ade-syofyan/',
              'social': 'Anda bisa menemukan saya di: <br> - LinkedIn: `open linkedin` <br> - WhatsApp: `open whatsapp`',
              'achievements': () => {
                  const unlockedIds = JSON.parse(localStorage.getItem('portfolioAchievements') || '[]');
                  let output = 'Daftar Pencapaian:<br>-------------------<br>';
                  
                  for (const id in achievements) {
                      const ach = achievements[id];
                      const isUnlocked = unlockedIds.includes(id);
                      
                      if (isUnlocked) {
                          output += `<span class="text-green-400">[] ${ach.name}:</span> ${ach.description}<br>`;
                      } else {
                          output += `[] ${ach.name}: ???<br>`;
                      }
                  }
                  return output;
              },
              'clear': () => { resetTerminal(); },
              'exit': () => { closeTerminal(); },
              'goto': (section) => {
                  if (section) {
                      const element = document.getElementById(section);
                      if (element) {
                          closeTerminal();
                          // Beri sedikit jeda agar terminal tertutup sebelum scroll
                          setTimeout(() => {
                              element.scrollIntoView({ behavior: 'smooth' });
                          }, 300);
                          return `Navigasi ke bagian #${section}...`;
                      } else {
                          return `Error: Bagian #${section} tidak ditemukan.`;
                      }
                  }
                  return 'Gunakan: `goto [nama-bagian]`, contoh: `goto skills`';
              },
              'open': (target) => {
                  const links = {
                      'linkedin': 'https://www.linkedin.com/in/ade-syofyan/',
                      'whatsapp': 'https://wa.me/6282284955080',
                      'cv': 'https://drive.google.com/file/d/1soqROMMjqd4pOTvj3nr9ANXJ4qaps7QE/view?usp=sharing'
                  };
                  if (target && links[target]) {
                      if (target === 'linkedin' || target === 'whatsapp') unlockAchievement('social_butterfly');
                      window.open(links[target], '_blank');
                      return `Membuka ${target} di tab baru...`;
                  }
                  return `Error: Argumen tidak valid. Gunakan 'open [${Object.keys(links).join(' | ')}]'.`;
              },
              'theme': (themeName) => {
                  const terminalWindow = document.getElementById('terminal-window');
                  if (themeName === 'light') {
                      terminalWindow.classList.add('light-theme');
                      return 'Tema diubah menjadi terang.';
                  } else if (themeName === 'dark') {
                      terminalWindow.classList.remove('light-theme');
                      return 'Tema diubah menjadi gelap.';
                  }
                  return 'Gunakan: `theme [light | dark]`';
              }
          };

          const processCommand = (command) => {
              printToTerminal(command, true);
              const [cmd, ...args] = command.toLowerCase().split(' ');
              const result = commands[cmd];

              unlockAchievement('terminal_velocity'); // Unlock saat perintah pertama kali dijalankan
              if (typeof result === 'function') {
                  const output = result(...args);
                  if (output) printToTerminal(output);
              } else if (result) {
                  printToTerminal(result);
              } else {
                  printToTerminal(`Perintah tidak ditemukan: ${command}. Ketik 'help' untuk daftar perintah.`);
              }
          };

          const openTerminal = () => {
              terminal.classList.remove('hidden');
              terminalInput.focus();
          };

          const closeTerminal = () => {
              terminal.classList.add('hidden');
              // Pastikan status maximized di-reset saat ditutup
              terminalWindow.classList.remove('maximized');
              resetTerminal(); // Reset terminal saat ditutup
          };

          const minimizeTerminal = () => {
              terminal.classList.add('hidden');
              // Pastikan status maximized di-reset saat minimize
              terminalWindow.classList.remove('maximized');
          };

          terminalInput.addEventListener('keydown', (e) => {
              if (e.key === 'Enter') {
                  const command = terminalInput.value.trim();
                  if (command) {
                      processCommand(command);
                  }
                  terminalInput.value = '';
              }
          });

          terminalToggleBtn.addEventListener('click', openTerminal);
          
          // Event listeners untuk kontrol jendela terminal
          terminalCloseBtn.addEventListener('click', closeTerminal);
          terminalMinimizeBtn.addEventListener('click', minimizeTerminal); // Minimalkan tanpa mereset
          terminalMaximizeBtn.addEventListener('click', () => {
              terminalWindow.classList.toggle('maximized');
          });

          // Keyboard shortcuts for terminal
          window.addEventListener('keydown', (e) => {
              const isTerminalHidden = terminal.classList.contains('hidden');

              // Always allow Escape key to close the terminal
              if (e.key === 'Escape' && !isTerminalHidden) {
                  closeTerminal();
                  return; // Stop further execution
              }

              // Prevent backtick shortcut if user is typing in any input field
              if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') {
                  return;
              }

              // Use backtick (`) to toggle the terminal
              if (e.key === '`') {
                  isTerminalHidden ? openTerminal() : closeTerminal();
              }
          });

          // Pesan selamat datang
          resetTerminal(); // Inisialisasi terminal dengan pesan selamat datang

        });

        // Fungsionalitas Modal untuk Detail Proyek
        const projectModal = document.getElementById("projectModal");
        const modalTitle = document.getElementById("modalTitle");
        const modalType = document.getElementById("modalType");
        const modalRole = document.getElementById("modalRole");
        const modalGoal = document.getElementById("modalGoal");
        const modalProcess = document.getElementById("modalProcess");
        const modalImpact = document.getElementById("modalImpact");
        const modalImages = document.getElementById("modalImages");

        window.openModal = async function (projectId) {
          const project = projects[projectId];
          if (project) {
            modalTitle.textContent = project.title;
            modalType.textContent = `Jenis: ${project.type}`;
            modalRole.textContent = `Peran: ${project.role}`;
            modalGoal.textContent = project.goal;
            modalProcess.textContent = project.process;
            modalImpact.textContent = project.impact;

            modalImages.innerHTML = ""; // Hapus gambar sebelumnya
            for (const imgData of project.images) {
              const imgElement = document.createElement("img");
              // Langsung tetapkan nama file untuk gambar yang diunggah
              imgElement.src = imgData.id;
              imgElement.alt = imgData.alt;
              imgElement.className =
                "rounded-lg w-full h-auto object-cover shadow-md";
              // Tambahkan onerror untuk fallback
              imgElement.onerror = function () {
                this.onerror = null;
                this.src =
                  "https://placehold.co/400x200/4a5568/e2e8f0?text=Image+Error";
              };
              modalImages.appendChild(imgElement);
            }

            projectModal.classList.add("open");
          }
        };

        window.closeModal = function () {
          projectModal.classList.remove("open");
        };

        // Tutup modal proyek saat mengklik di luar konten
        projectModal.addEventListener("click", (e) => {
          if (e.target === projectModal) {
            closeModal();
          }
        });

        // Fungsionalitas Modal Chatbot
        const chatbotModal = document.getElementById("chatbotModal");
        const chatDisplay = document.getElementById("chatDisplay");
        const chatInput = document.getElementById("chatInput");

        window.openChatbotModal = function () {
          chatbotModal.classList.add("open");
          chatInput.focus(); // Fokuskan input saat modal terbuka
        };

        window.closeChatbotModal = function () {
          chatbotModal.classList.remove("open");
          chatDisplay.innerHTML = `
                    <div class="flex justify-start mb-2">
                        <div class="bg-gray-800 text-white p-3 rounded-lg max-w-[80%] chat-message">Halo! Saya Ade Syofyan. Ada yang bisa saya bantu tentang keahlian atau pengalaman saya?</div>
                    </div>
                `; // Reset chat saat ditutup
        };

        // Tutup modal chatbot saat mengklik di luar konten
        chatbotModal.addEventListener("click", (e) => {
          if (e.target === chatbotModal) {
            closeChatbotModal();
          }
        });

        // Konteks untuk LLM (diekstrak dari bagian Tentang Saya dan Keahlian)
        const adeProfileContext = `
                Nama: Ade Syofyan
                Jabatan: Programmer Senior
                Pengalaman: Lebih dari 7 tahun dalam pengembangan aplikasi web, mobile, dan ERP.
                Proses Kerja: Konsultasi & Perencanaan, Desain & Prototyping, Pengembangan & Pengujian, Deployment & Dukungan.
                Spesialisasi: Membangun solusi digital inovatif yang efisien dan berdampak positif. Ahli dalam integrasi AI (AI akuntan untuk input jurnal otomatis, chatbot WhatsApp AI untuk tim sales/CS).
                Tech Stack: Laravel, Flutter, Firebase, Kotlin, PHP, JavaScript, Sistem Real-time.
                Bidang Keahlian: Mobile Development, Web Development, AI Integration, ERP Systems, Firebase, Sistem Real-time, Problem Solving, Cloud Services.
                Tujuan: Memberikan solusi terbaik dengan pendekatan problem-solving yang kuat.
                Nomor WhatsApp: 082284955080
                CV: https://drive.google.com/file/d/1soqROMMjqd4pOTvj3nr9ANXJ4qaps7QE/view?usp=sharing
            `;

        // Opsi cepat untuk chatbot
        const allQuickChatOptions = [
            "Ceritakan tentang pengalaman Flutter Anda.",
            "Proyek AI apa saja yang pernah dikerjakan?",
            "Bagaimana proses kerja Anda?",
            "Teknologi apa yang paling Anda kuasai?",
            "Bisakah Anda jelaskan lebih lanjut tentang integrasi AI akuntan?",
            "Apa saja layanan yang Anda tawarkan?",
            "Proyek web apa yang paling menantang?",
            "Bagaimana Anda memastikan kualitas kode?",
            "Apakah Anda tersedia untuk proyek freelance?",
            "Berapa lama biasanya Anda mengerjakan proyek mobile?"
        ];

        // Fungsi untuk mengacak array (Fisher-Yates shuffle)
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Instruksi sistem untuk memandu perilaku LLM
        const systemInstructionText = `Anda adalah Ade Syofyan, seorang Programmer Senior.
            Jawablah pertanyaan HANYA berdasarkan informasi profil saya yang terlampir.
            Fokus pada keahlian pengembangan aplikasi, teknologi yang saya kuasai, dan jenis proyek yang saya kerjakan.

            ATURAN KHUSUS:
            1. Jika pertanyaan TIDAK terkait dengan jasa program, keahlian teknis, atau pengalaman saya yang disebutkan di profil, jawablah dengan sopan bahwa Anda tidak memiliki informasi tersebut atau itu di luar cakupan pengetahuan Anda sebagai asisten AI di portofolio ini. Contoh: "Maaf, saya hanya dapat memberikan informasi seputar keahlian dan proyek yang saya kerjakan. Untuk pertanyaan di luar itu, saya tidak memiliki datanya."
            2. Jika ada pertanyaan mengenai HARGA atau TARIF jasa, atau jika pengguna menyatakan MINAT untuk PEMESANAN/KOLABORASI langsung, selalu arahkan mereka untuk menghubungi saya melalui WhatsApp. Respons harus mencakup tautan wa.me dengan pesan pre-filled yang merangkum pertanyaan/minat mereka. Format pesan pre-filled harus jelas dan merangkum minat pengguna. Contoh format: "Untuk informasi mengenai harga atau pemesanan/kolaborasi, mohon hubungi saya langsung melalui [WhatsApp](https://wa.me/6282284955080?text=Halo%20Ade%2C%20saya%20tertarik%20dengan%20[Rangkuman%20minat%20atau%20pertanyaan%20pengguna%2C%20contoh%3A%20pengembangan%20aplikasi%20mobile%20Flutter]). Saya akan dengan senang hati membantu Anda di sana!" Pastikan [Rangkuman minat atau pertanyaan pengguna] diisi dengan ringkasan pertanyaan terakhir pengguna, di-encode URL agar sesuai untuk tautan WhatsApp.
            3. JANGAN mengarang jawaban atau memberikan informasi yang tidak ada dalam profil.
            4. Jaga nada bicara tetap profesional dan membantu.

            Informasi Profil Ade Syofyan:
            ${adeProfileContext}
            `;


        // Fungsi untuk mengirim pesan ke LLM
        window.sendChatMessage = async function () {
          // Dijadikan dapat diakses secara global
          const message = chatInput.value.trim();

          // --- ANALISIS DAN HIGHLIGHT FITUR ---
          // Fungsi untuk menganalisis teks dan menyorot elemen yang relevan
          function analyzeAndHighlight(text) {
            const lowerText = text.toLowerCase();
            
            // Hapus highlight sebelumnya dari semua elemen yang mungkin
            document.querySelectorAll('.highlight-feature').forEach(el => el.classList.remove('highlight-feature'));

            // Pemetaan kata kunci ke selector elemen
            const keywordMap = {
              'flutter': '[data-skill="mobile"]',
              'kotlin': '[data-skill="mobile"]',
              'mobile': '[data-skill="mobile"]',
              'laravel': '[data-skill="web"]',
              'php': '[data-skill="web"]',
              'web': '[data-skill="web"]',
              'ai': '[data-skill="ai"]',
              'chatbot': '[data-skill="ai"]',
              'erp': '[data-skill="erp"]',
              'firebase': '[data-skill="firebase"]',
            };

            for (const keyword in keywordMap) {
              if (lowerText.includes(keyword)) {
                const selector = keywordMap[keyword];
                const elementToHighlight = document.querySelector(selector);
                if (elementToHighlight) {
                  elementToHighlight.scrollIntoView({ behavior: 'smooth', block: 'center' });
                  setTimeout(() => elementToHighlight.classList.add('highlight-feature'), 500); // Delay untuk efek setelah scroll
                  setTimeout(() => elementToHighlight.classList.remove('highlight-feature'), 2500); // Hapus highlight setelah 2 detik
                  break; // Hentikan setelah menemukan kata kunci pertama
                }
              }
            }
          }
          if (!message) return;

          // Tambahkan pesan pengguna ke tampilan
          unlockAchievement('ai_challenger'); // Unlock saat pesan pertama dikirim
          const userMessageDiv = document.createElement("div");
          userMessageDiv.className = "flex justify-end mb-2 ";
          userMessageDiv.innerHTML = `<div class="bg-blue-600 text-white p-3 rounded-lg max-w-[80%] chat-message">${message}</div>`; // Tetap biru untuk pesan pengguna
          chatDisplay.appendChild(userMessageDiv);

          // Tambahkan pesan pengguna ke riwayat percakapan
          conversationHistory.push({ role: "user", parts: [{ text: message }] });
          
          // Panggil fungsi analisis setelah pesan dikirim
          analyzeAndHighlight(message);
          chatInput.value = ""; // Kosongkan input

          // Tambahkan indikator loading
          const loadingDiv = document.createElement("div");
          loadingDiv.className = "flex justify-start mb-2";
          loadingDiv.innerHTML = `<div class="p-3 rounded-lg max-w-[80%] animate-pulse chat-message" style="background-color: var(--bg-card-secondary); color: var(--text-secondary);">Mengetik...</div>`;
          chatDisplay.appendChild(loadingDiv);
          chatDisplay.scrollTop = chatDisplay.scrollHeight; // Gulir ke bawah

          try {
            const payload = {
              contents: conversationHistory,
              systemInstruction: {
                parts: [{ text: systemInstructionText }],
              },
            };

            const apiKey = "AIzaSyAYoqmGxZT9FwG2obC3-xpxSN6orVxi0Wk"; // Pastikan API Key Anda benar
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${apiKey}`;

            const response = await fetch(apiUrl, {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify(payload),
            });
            const result = await response.json();

            // Hapus indikator loading
            chatDisplay.removeChild(loadingDiv);

            if (
              result.candidates &&
              result.candidates.length > 0 &&
              result.candidates[0].content &&
              result.candidates[0].content.parts &&
              result.candidates[0].content.parts.length > 0
            ) {
              const modelResponse = result.candidates[0].content;
              let text = modelResponse.parts[0].text;

              // Tambahkan logika untuk memeriksa apakah AI mengarahkan ke WhatsApp
              const whatsappRegex = /\[(.*?)\]\((https:\/\/wa\.me\/.*?)\)/;
              if (whatsappRegex.test(text)) {
                // Jika ada link WhatsApp, encode pesan pengguna untuk URL
                const encodedMessage = encodeURIComponent(
                  `Halo Ade, saya tertarik dengan ${message}`
                );
                // Ganti placeholder rangkuman minat dengan pesan yang di-encode
                text = text.replace(
                  /\[Rangkuman minat atau pertanyaan pengguna.*?\]/,
                  encodedMessage
                );
                // Lalu ganti format markdown ke link HTML
                text = text.replace(
                  whatsappRegex,
                  '<a href="$2" target="_blank" class="text-blue-400 hover:underline">$1</a>'
                );
              }

              const aiMessageDiv = document.createElement("div");
              aiMessageDiv.className = "flex justify-start mb-2";
              aiMessageDiv.innerHTML = `<div class="p-3 rounded-lg max-w-[80%] chat-message" style="background-color: var(--bg-card-secondary);">${text}</div>`;
              chatDisplay.appendChild(aiMessageDiv);

              // Simpan respons AI yang sudah diproses ke riwayat
              conversationHistory.push({ role: "model", parts: [{ text: text }] });

              typeMessage(aiMessageDiv.querySelector('.chat-message'), text);
            } else {
              const errorMessageDiv = document.createElement("div");
              errorMessageDiv.className = "flex justify-start mb-2";
              errorMessageDiv.innerHTML = `<div class="bg-red-500 text-white p-3 rounded-lg max-w-[80%] chat-message">Maaf, saya tidak dapat memproses permintaan ini.</div>`;
              chatDisplay.appendChild(errorMessageDiv);
            }
          } catch (error) {
            console.error("Error calling Gemini API:", error);
            // Hapus indikator loading
            chatDisplay.removeChild(loadingDiv);
            const errorMessageDiv = document.createElement("div");
            errorMessageDiv.className = "flex justify-start mb-2";
            errorMessageDiv.innerHTML = `<div class="bg-red-500 text-white p-3 rounded-lg max-w-[80%] chat-message">Terjadi kesalahan saat berkomunikasi dengan AI.</div>`;
            chatDisplay.appendChild(errorMessageDiv);
            console.error(error); // Catat kesalahan untuk debugging
          } finally {
            chatDisplay.scrollTop = chatDisplay.scrollHeight; // Gulir ke bawah setelah respons
          }
        };

       // Fungsi untuk menambahkan efek mengetik
       function typeMessage(element, text, delay = 20) {
            let i = 0;
            element.innerHTML = ''; // Gunakan innerHTML dari awal
            function typing() {
                if (i < text.length) {
                    // Cek apakah karakter saat ini adalah awal dari tag HTML (misal, <a href...>)
                    if (text.charAt(i) === '<') {
                        // Cari akhir dari tag HTML
                        const tagEndIndex = text.indexOf('>', i);
                        if (tagEndIndex !== -1) {
                            // Ekstrak seluruh tag dan langsung tambahkan ke innerHTML
                            const tag = text.substring(i, tagEndIndex + 1);
                            element.innerHTML += tag;
                            // Pindahkan indeks melewati tag yang baru ditambahkan
                            i = tagEndIndex + 1;
                            // Lanjutkan proses mengetik tanpa jeda
                            typing();
                            return; // Keluar dari pemanggilan saat ini untuk melanjutkan di pemanggilan berikutnya
                        }
                    }

                    // Jika bukan tag HTML, ketik karakter seperti biasa
                    element.innerHTML += text.charAt(i);
                    i++;
                    chatDisplay.scrollTop = chatDisplay.scrollHeight;
                    setTimeout(typing, delay);
                }
            }
            typing();
        }
        
        // Fungsi untuk menambahkan opsi cepat ke chat display
        function addQuickOptions() {
            // Ambil 3 opsi acak dari allQuickChatOptions
            const shuffledOptions = shuffleArray([...allQuickChatOptions]);
            const selectedOptions = shuffledOptions.slice(0, 3); // Ambil 3 pertanyaan pertama setelah diacak

            const quickOptionsDiv = document.createElement("div");
            quickOptionsDiv.className = "flex flex-wrap gap-2 mt-2 mb-2 justify-start";
            selectedOptions.forEach(optionText => {
                const button = document.createElement("button");
                button.className = "text-sm py-1 px-3 rounded-full transition-colors";
                button.style="background-color: var(--bg-card-secondary); color: var(--text-secondary);";
                button.textContent = optionText;
                button.onclick = () => {
                    chatInput.value = optionText;
                    sendChatMessage();
                    // Hapus opsi cepat setelah salah satu diklik
                    if (quickOptionsDiv.parentNode) {
                        quickOptionsDiv.parentNode.removeChild(quickOptionsDiv);
                    }
                };
                quickOptionsDiv.appendChild(button);
            });
            chatDisplay.appendChild(quickOptionsDiv);
            chatDisplay.scrollTop = chatDisplay.scrollHeight;
        }

        // Event listener untuk tombol Enter di input chat
        chatInput.addEventListener("keypress", function (event) {
          if (event.key === "Enter") {
            event.preventDefault(); // Mencegah perilaku Enter default (misalnya, baris baru)
            sendChatMessage();
          }
        });

        // Modifikasi openChatbotModal untuk memuat histori dan menampilkan opsi cepat
        window.openChatbotModal = function () {
          chatbotModal.classList.add("open");
          chatInput.focus(); // Fokuskan input saat modal terbuka
          loadChatHistory(); // Muat histori chat
          if (chatDisplay.children.length <= 1) { // Hanya tampilkan jika belum ada interaksi signifikan
            addQuickOptions();
          }
        };

        // Fungsi untuk benar-benar menutup modal chatbot utama
        function actuallyCloseChatbot() {
            const chatbotModal = document.getElementById("chatbotModal");
            chatbotModal.classList.remove("open");
            document.body.style.overflow = ""; // Pastikan scroll body diaktifkan kembali
        }

        // Fungsi untuk menampilkan modal konfirmasi kustom
        function showCustomConfirm(message, yesCallback, noCallback, yesText = "Ya", noText = "Tidak") {
            const modal = document.getElementById('customConfirmModal');
            const msgElement = document.getElementById('customConfirmMessage');
            const btnYes = document.getElementById('customConfirmButtonYes');
            const btnNo = document.getElementById('customConfirmButtonNo');

            msgElement.textContent = message;
            btnYes.textContent = yesText;
            btnNo.textContent = noText;

            // Hapus event listener sebelumnya untuk menghindari eksekusi ganda
            // dengan mengganti tombol dengan klonnya
            const newBtnYes = btnYes.cloneNode(true);
            btnYes.parentNode.replaceChild(newBtnYes, btnYes);
            
            const newBtnNo = btnNo.cloneNode(true);
            btnNo.parentNode.replaceChild(newBtnNo, btnNo);

            newBtnYes.onclick = () => {
                modal.classList.add('hidden');
                if (yesCallback) yesCallback();
            };

            newBtnNo.onclick = () => {
                modal.classList.add('hidden');
                if (noCallback) noCallback();
            };

            modal.classList.remove('hidden');
        }

        // Modifikasi closeChatbotModal untuk menggunakan modal konfirmasi kustom
        window.closeChatbotModal = function () {
          const hasUserInteracted = chatDisplay.querySelector('.flex.justify-end'); // Cek apakah ada pesan dari pengguna

          if (!hasUserInteracted) {
            // Jika tidak ada interaksi pengguna (tidak ada pesan yang dikirim pengguna),
            // tutup modal secara langsung.
            actuallyCloseChatbot();
          } else {
            // Jika ada interaksi pengguna, tampilkan dialog konfirmasi.
            showCustomConfirm(
              "Simpan sesi chat ini?",
              () => { // Callback jika "Simpan" diklik
                saveChatHistory();
                actuallyCloseChatbot();
              },
              () => { // Callback jika "Jangan Simpan" diklik
                deleteChatHistory(); 
                actuallyCloseChatbot();
              },
              "Simpan", "Jangan Simpan"
            );
          }
        };
        // --- Logika Canvas untuk Efek Latar Belakang "Plexus" ---
        const canvas = document.getElementById("heroCanvas");
        const ctx = canvas.getContext("2d");
        let particles = [];
        const numberOfParticles = 80; // Jumlah partikel
        const maxDistance = 150; // Jarak maksimal untuk menghubungkan partikel

        // Atur ukuran kanvas agar sesuai dengan header
        function resizeCanvas() {
          canvas.width = window.innerWidth;
          canvas.height = document.querySelector("header").offsetHeight;
        }

        // Partikel
        class Particle {
          constructor(x, y) {
            this.x = x;
            this.y = y;
            this.size = Math.random() * 3 + 1; // Ukuran partikel acak
            this.speedX = Math.random() * 0.5 - 0.25; // Kecepatan X acak
            this.speedY = Math.random() * 0.5 - 0.25; // Kecepatan Y acak
            this.color = `rgba(99, 179, 237, ${Math.random() * 0.5 + 0.3})`; // Warna biru dengan transparansi
          }

          update() {
            this.x += this.speedX;
            this.y += this.speedY;

            // Batasi partikel agar tetap di dalam kanvas
            if (this.x > canvas.width || this.x < 0) this.speedX *= -1;
            if (this.y > canvas.height || this.y < 0) this.speedY *= -1;
          }

          draw() {
            ctx.fillStyle = this.color;
            ctx.beginPath();
            ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
            ctx.fill();
          }
        }

        // Inisialisasi partikel
        function init() {
          particles = [];
          for (let i = 0; i < numberOfParticles; i++) {
            const x = Math.random() * canvas.width;
            const y = Math.random() * canvas.height;
            particles.push(new Particle(x, y));
          }
        }

        // Hubungkan partikel
        function connect() {
          let opacityValue = 1;
          for (let a = 0; a < particles.length; a++) {
            for (let b = a; b < particles.length; b++) {
              const distance = Math.sqrt(
                (particles[a].x - particles[b].x) ** 2 +
                  (particles[a].y - particles[b].y) ** 2
              );

              if (distance < maxDistance) {
                opacityValue = 1 - distance / maxDistance;
                ctx.strokeStyle = `rgba(99, 179, 237, ${opacityValue})`; // Garis biru dengan transparansi
                ctx.lineWidth = 1;
                ctx.beginPath();
                ctx.moveTo(particles[a].x, particles[a].y);
                ctx.lineTo(particles[b].x, particles[b].y);
                ctx.stroke();
              }
            }
          }
        }

        // Loop animasi
        function animateCanvas() {
          requestAnimationFrame(animateCanvas);
          ctx.clearRect(0, 0, canvas.width, canvas.height); // Hapus kanvas setiap frame
          for (let i = 0; i < particles.length; i++) {
            particles[i].update();
            particles[i].draw();
          }
          connect();
        }

        // Jalankan saat jendela dimuat dan saat ukuran jendela berubah
        window.addEventListener("load", () => {
          resizeCanvas();
          init();
          animateCanvas();
        });

        window.addEventListener("resize", () => {
          resizeCanvas();
          init(); // Inisialisasi ulang partikel setelah resize untuk penempatan yang benar
        });

        // Mobile Menu Toggle
        const mobileMenu = document.getElementById("mobileMenu");
        const mobileMenuToggleBtn = document.getElementById("mobileMenuToggleBtn"); // Get the toggle button

        window.toggleMobileMenu = function () {
          const isOpen = mobileMenu.classList.toggle("open");
          if (mobileMenuToggleBtn) {
            mobileMenuToggleBtn.setAttribute("aria-expanded", isOpen.toString()); // Update aria-expanded
          }

          // Nonaktifkan scroll body saat menu mobile terbuka
          if (isOpen) {
            document.body.style.overflow = "hidden";
          } else {
            document.body.style.overflow = "";
          }
        };

        // Ensure closeMobileMenu also updates aria-expanded
        window.closeMobileMenu = function () {
          mobileMenu.classList.remove("open");
          document.body.style.overflow = ""; // Aktifkan scroll body
          if (mobileMenuToggleBtn) {
            mobileMenuToggleBtn.setAttribute("aria-expanded", "false"); // Set to false when closed
          }
          // Beri sedikit delay agar scroll selesai sebelum highlight diperbarui
          setTimeout(() => {
            highlightNavLinkOnScroll();
          }, 100);
        };

        // Scroll to Top functionality
        const scrollToTopBtn = document.getElementById("scrollToTopBtn");

        const profileImg = document.getElementById('profile-img'); // Dapatkan elemen gambar profil
        window.onscroll = function () {
          // Parallax logic for Hero Canvas
          const scrollY = window.scrollY;
          const parallaxSpeed = 0.4; // Adjust this value (0 to 1) for desired effect
          heroCanvas.style.transform = 'translateY(' + scrollY * parallaxSpeed + 'px)';
          if (
            document.body.scrollTop > 20 ||
            document.documentElement.scrollTop > 20
          ) {
            scrollToTopBtn.style.display = "block";
          } else {
            scrollToTopBtn.style.display = "none";
          }
        };

        // Modifikasi window.onscroll untuk menambahkan efek parallax pada gambar profil
        const aboutSection = document.getElementById('about'); // Dapatkan section About Me
        window.onscroll = function () {
            // Parallax logic for Hero Canvas
            const scrollY = window.scrollY;
            const parallaxSpeedCanvas = 0.4; // Kecepatan parallax untuk kanvas
            heroCanvas.style.transform = 'translateY(' + scrollY * parallaxSpeedCanvas + 'px)';

            // Parallax logic for Profile Image (within About Me section)
            if (profileImg && aboutSection) {
                const sectionTop = aboutSection.offsetTop;
                const sectionHeight = aboutSection.offsetHeight;
                const scrollRelativeToSection = scrollY - sectionTop;
                const parallaxSpeedImg = 0.1; // Kecepatan parallax untuk gambar profil (nilai kecil untuk efek ringan)

                // Terapkan transformasi hanya saat section About Me terlihat atau dekat
                // Ini mencegah gambar bergerak saat section masih jauh di atas atau di bawah
                if (scrollY + window.innerHeight > sectionTop && scrollY < sectionTop + sectionHeight) {
                     // Hitung pergeseran berdasarkan scroll relatif
                     // Kita bisa menggeser gambar ke atas saat scroll ke bawah
                    const translateY = scrollRelativeToSection * parallaxSpeedImg;
                    profileImg.style.transform = 'translateY(' + translateY + 'px)';
                } else {
                    // Reset transformasi saat section tidak terlihat
                     profileImg.style.transform = 'translateY(0px)';
                }
            }

            // Scroll to Top Button logic
            if (
                document.body.scrollTop > 20 ||
                document.documentElement.scrollTop > 20
            ) {
                scrollToTopBtn.style.display = "block";
            } else {
                scrollToTopBtn.style.display = "none";
            }

            // Highlight Nav Link logic (panggil fungsi yang sudah ada)
            highlightNavLinkOnScroll();
        };
        // Cek scroll untuk achievement 'explorer'
        const footer = document.querySelector('footer');
        const onScroll = () => {
            if (window.innerHeight + window.scrollY >= footer.offsetTop) {
                unlockAchievement('explorer');
            }
        };
        window.addEventListener('scroll', onScroll, { passive: true });

        // Fungsi untuk menyimpan dan memuat histori chat
        function saveChatHistory() {
            // Simpan seluruh riwayat percakapan ke localStorage
            localStorage.setItem('chatbotHistory', JSON.stringify(conversationHistory));
        }

        function deleteChatHistory() {
            localStorage.removeItem('chatbotHistory');
            conversationHistory = []; // Kosongkan riwayat di memori
            // Reset tampilan chat ke kondisi awal
            chatDisplay.innerHTML = `
                <div class="flex justify-start mb-2">
                    <div class="p-3 rounded-lg max-w-[80%] chat-message" style="background-color: var(--bg-card-secondary);">Halo! Saya Ade Syofyan. Ada yang bisa saya bantu tentang keahlian atau pengalaman saya?</div>
                </div>
            `;
            // Opsional: tambahkan kembali opsi cepat jika tampilan direset
            if (chatDisplay.children.length <= 1) {
                addQuickOptions();
            }
        }

        function loadChatHistory() {
            const savedHistory = localStorage.getItem('chatbotHistory');
            chatDisplay.innerHTML = ''; // Bersihkan display dulu
            conversationHistory = []; // Reset dulu
            if (savedHistory) {
                conversationHistory = JSON.parse(savedHistory);
                // Bangun kembali UI dari riwayat yang dimuat
                conversationHistory.forEach(msg => {
                    const isUser = msg.role === 'user';
                    const messageDiv = document.createElement("div");
                    messageDiv.className = `flex ${isUser ? 'justify-end' : 'justify-start'} mb-2`;
                    // Gunakan innerHTML untuk merender tautan jika ada
                messageDiv.innerHTML = `<div class="${isUser ? 'bg-blue-600 text-white' : ''} p-3 rounded-lg max-w-[80%] chat-message" style="${!isUser ? 'background-color: var(--bg-card-secondary);' : ''}">${msg.parts[0].text}</div>`;
                    chatDisplay.appendChild(messageDiv);
                });
            } else {
                 // Jika tidak ada histori sama sekali, tampilkan pesan default
                chatDisplay.innerHTML = `<div class="flex justify-start mb-2"><div class="p-3 rounded-lg max-w-[80%] chat-message" style="background-color: var(--bg-card-secondary);">Halo! Saya Ade Syofyan. Ada yang bisa saya bantu tentang keahlian atau pengalaman saya?</div></div>`;
            }
            chatDisplay.scrollTop = chatDisplay.scrollHeight;
        }

        window.scrollToTop = function () {
          window.scrollTo({
            top: 0,
            behavior: "smooth",
          });
        };

        // --- Logika highlight menu aktif saat scroll ---
        // Dapatkan semua section yang memiliki ID yang sesuai dengan link navigasi
        const sections = document.querySelectorAll("section[id]");

        // Dapatkan semua link navigasi desktop dan mobile
        const desktopNavLinks = document.querySelectorAll(".desktop-nav a");
        const mobileNavLinks = document.querySelectorAll(
          ".mobile-menu-overlay a"
        );

        // Fungsi untuk smooth scroll ke target dengan offset header
        function smoothScrollToTarget(event) {
            const link = event.currentTarget;
            const targetId = link.getAttribute("href"); // e.g., "#about"

            // Pastikan ini adalah tautan ke section (bukan hanya "#")
            if (targetId && targetId.startsWith("#") && targetId.length > 1) {
                event.preventDefault(); // Mencegah default jump
                const targetElement = document.querySelector(targetId);

                if (targetElement) {
                    const headerOffset = document.querySelector('nav').offsetHeight;
                    const elementPosition = targetElement.offsetTop;
                    const offsetPosition = elementPosition - headerOffset;

                    window.scrollTo({
                        top: offsetPosition,
                        behavior: 'smooth'
                    });
                }

                // Jika ini adalah tautan di menu mobile, tutup menu setelah klik
                if (link.closest('.mobile-menu-overlay')) {
                    closeMobileMenu();
                }
            }
            // Jika targetId hanya "#" (seperti pada link Chat AI), biarkan atribut onclick-nya yang menangani
        }

        // Tambahkan event listener ke tautan navigasi desktop
        desktopNavLinks.forEach(link => {
            const href = link.getAttribute("href");
            // Hanya tambahkan ke tautan yang mengarah ke section
            if (href && href.startsWith("#") && href.length > 1) {
                link.addEventListener("click", smoothScrollToTarget);
            }
        });

        // Tambahkan event listener ke tautan navigasi mobile
        mobileNavLinks.forEach(link => {
            const href = link.getAttribute("href");
            // Hanya tambahkan ke tautan yang mengarah ke section
            if (href && href.startsWith("#") && href.length > 1) {
                link.addEventListener("click", smoothScrollToTarget);
            }
            // Tautan "Chat ke AI" di mobile sudah ditangani oleh atribut onclick-nya
        });

        function highlightNavLinkOnScroll() {
          let currentSectionId = ""; // Untuk menyimpan ID section yang sedang aktif
          const headerHeight = document.querySelector("nav").offsetHeight; // Tinggi navbar

          sections.forEach((section) => {
            // Dapatkan posisi scroll saat ini
            const scrollY = window.scrollY;

            // Dapatkan posisi atas dan tinggi setiap section
            // Kurangi sedikit offset untuk akun fixed header
            const sectionTop = section.offsetTop - headerHeight - 10; // Offset tambahan agar lebih akurat
            const sectionBottom = sectionTop + section.offsetHeight;

            // Cek apakah posisi scroll berada di dalam section saat ini
            if (scrollY >= sectionTop && scrollY < sectionBottom) {
              currentSectionId = section.getAttribute("id");
            }
          });

          // Hapus kelas 'active' dari semua link navigasi terlebih dahulu
          desktopNavLinks.forEach((link) => {
            link.classList.remove("active");
          });
          mobileNavLinks.forEach((link) => {
            link.classList.remove("active");
          });

          // Tambahkan kelas 'active' ke link yang sesuai dengan section aktif
          if (currentSectionId) {
            const activeDesktopLink = document.querySelector(
              `.desktop-nav a[href="#${currentSectionId}"]`
            );
            if (activeDesktopLink) {
              activeDesktopLink.classList.add("active");
            }

            const activeMobileLink = document.querySelector(
              `.mobile-menu-overlay a[href="#${currentSectionId}"]`
            );
            if (activeMobileLink) {
              activeMobileLink.classList.add("active");
            }
          }
        }

        // Panggil fungsi saat halaman dimuat dan setiap kali di-scroll
        window.addEventListener("load", highlightNavLinkOnScroll);
        // window.addEventListener("scroll", highlightNavLinkOnScroll); // Dihapus karena sudah digabung ke window.onscroll
      })();
    </script>
  </body>
</html>
